



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
  <meta name="robots" content="noindex, nofollow" />

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://opensciencegrid.github.io/technology-itb/infrastructure/koji-hub-setup/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.4">
    
    
      
        <title>Koji-Hub Setup - OSG Technology Area (ITB)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/itb.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#notes-on-koji-hub-setup" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://opensciencegrid.github.io/technology-itb/" title="OSG Technology Area (ITB)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                OSG Technology Area (ITB)
              </span>
              <span class="md-header-nav__topic">
                Koji-Hub Setup
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/opensciencegrid/technology-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://opensciencegrid.github.io/technology-itb/" title="OSG Technology Area (ITB)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    OSG Technology Area (ITB)
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/opensciencegrid/technology-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Software
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Software
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Packaging
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Packaging
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/rpm-development-guide/" title="RPM Development Guide" class="md-nav__link">
      RPM Development Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/osg-build-tools/" title="OSG Build Tools" class="md-nav__link">
      OSG Build Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/quilt/" title="Using Quilt" class="md-nav__link">
      Using Quilt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/upcoming-to-main/" title="Upcoming to Main" class="md-nav__link">
      Upcoming to Main
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/koji-workflow/" title="Koji Workflow" class="md-nav__link">
      Koji Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/create-vo-client/" title="Creating the VO Client Package" class="md-nav__link">
      Creating the VO Client Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/repository-management/" title="Repository Management" class="md-nav__link">
      Repository Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/globus-mass-update-procedure/" title="Globus Mass Update Procedure" class="md-nav__link">
      Globus Mass Update Procedure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/resurrecting-epel-packages/" title="Resurrecting Epel Packages" class="md-nav__link">
      Resurrecting Epel Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/koji-mass-rebuilds/" title="Koji Mass Rebuilds" class="md-nav__link">
      Koji Mass Rebuilds
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/development-process/" title="Development Process" class="md-nav__link">
      Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/git-software-development/" title="Git Software Development Process" class="md-nav__link">
      Git Software Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/ce-test-scaling/" title="CE Scale Testing" class="md-nav__link">
      CE Scale Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/ipv6-testing/" title="IPv6 Testing" class="md-nav__link">
      IPv6 Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/software-support/" title="Software Support" class="md-nav__link">
      Software Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/effort-tracking/" title="Effort Tracking" class="md-nav__link">
      Effort Tracking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/release-planning/" title="Release Planning" class="md-nav__link">
      Release Planning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/new-team-member/" title="New Team Member" class="md-nav__link">
      New Team Member
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Release
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Release
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/cut-sw-release/" title="How to Cut a Release" class="md-nav__link">
      How to Cut a Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/cut-data-release/" title="How to Cut a Data Release" class="md-nav__link">
      How to Cut a Data Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/release-policy/" title="Release Policy" class="md-nav__link">
      Release Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/release-schedule/" title="Release Schedule" class="md-nav__link">
      Release Schedule
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/new-release-series/" title="New Release Series" class="md-nav__link">
      New Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/old-release-removal/" title="Old Release Series Removal" class="md-nav__link">
      Old Release Series Removal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/itb-testing/" title="ITB Prerelease Testing" class="md-nav__link">
      ITB Prerelease Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/empty-pkgs/" title="Empty Packages" class="md-nav__link">
      Empty Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/acceptance-testing/" title="Acceptance Testing" class="md-nav__link">
      Acceptance Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Policy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Policy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/service-migrations-spring-2018/" title="Service Migrations - Spring 2018" class="md-nav__link">
      Service Migrations - Spring 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/gums-retire/" title="GUMS Retirement" class="md-nav__link">
      GUMS Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/bestman2-retire/" title="BeStMan2 Retirement" class="md-nav__link">
      BeStMan2 Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/voms-admin-retire/" title="VOMS Admin Retirement" class="md-nav__link">
      VOMS Admin Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/release-series/" title="Release Series Support" class="md-nav__link">
      Release Series Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/globus-toolkit/" title="Globus Toolkit Support" class="md-nav__link">
      Globus Toolkit Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/external-oasis-repos/" title="OASIS Repository Mirroring" class="md-nav__link">
      OASIS Repository Mirroring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/flexible-release-model/" title="Flexible Release Model" class="md-nav__link">
      Flexible Release Model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Infrastructure
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Infrastructure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../koji-restore-recipe/" title="Koji Restore Recipe" class="md-nav__link">
      Koji Restore Recipe
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Koji-Hub Setup
      </label>
    
    <a href="./" title="Koji-Hub Setup" class="md-nav__link md-nav__link--active">
      Koji-Hub Setup
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tags" title="Tags" class="md-nav__link">
    Tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-tags" title="Base tags" class="md-nav__link">
    Base tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dist-el9156793-build" title="dist-el[567]-build" class="md-nav__link">
    dist-el[567]-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-el9156793" title="osg-el[567]" class="md-nav__link">
    osg-el[567]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kojira-fake" title="kojira-fake" class="md-nav__link">
    kojira-fake
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#main-osg-tags" title="Main OSG tags" class="md-nav__link">
    Main OSG tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osg-39112393-el9156793-build" title="osg-3.[123]-el[567]-build" class="md-nav__link">
    osg-3.[123]-el[567]-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-upcoming-el9156793-build" title="osg-upcoming-el[567]-build" class="md-nav__link">
    osg-upcoming-el[567]-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-42-el9156793-development" title="osg-*-el[567]-development" class="md-nav__link">
    osg-*-el[567]-development
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-42-el9156793-testing" title="osg-*-el[567]-testing" class="md-nav__link">
    osg-*-el[567]-testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-42-el9156793-prerelease" title="osg-*-el[567]-prerelease" class="md-nav__link">
    osg-*-el[567]-prerelease
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-42-el9156793-release" title="osg-*-el[567]-release" class="md-nav__link">
    osg-*-el[567]-release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-39112393-el9156793-release-build" title="osg-3.[123]-el[567]-release-build" class="md-nav__link">
    osg-3.[123]-el[567]-release-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-39112393-el9156793-contrib" title="osg-3.[123]-el[567]-contrib" class="md-nav__link">
    osg-3.[123]-el[567]-contrib
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specialized-tags" title="Specialized tags" class="md-nav__link">
    Specialized tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#el916793-globus-and-el916793-globus-build" title="el[67]-globus and el[67]-globus-build" class="md-nav__link">
    el[67]-globus and el[67]-globus-build
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collaborator-tags" title="Collaborator Tags" class="md-nav__link">
    Collaborator Tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hcc-42" title="hcc-*" class="md-nav__link">
    hcc-*
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-targets" title="Build Targets" class="md-nav__link">
    Build Targets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osg-el9156793_1" title="osg-el[567]" class="md-nav__link">
    osg-el[567]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-39112393-el9156793" title="osg-3.[123]-el[567]" class="md-nav__link">
    osg-3.[123]-el[567]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-upcoming-el9156793" title="osg-upcoming-el[567]" class="md-nav__link">
    osg-upcoming-el[567]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dist-el9156793-build_1" title="dist-el[567]-build" class="md-nav__link">
    dist-el[567]-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kojira-fake-42" title="kojira-fake-*" class="md-nav__link">
    kojira-fake-*
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hcc-el9156793-panda-el6" title="hcc-el[567], panda-el6" class="md-nav__link">
    hcc-el[567], panda-el6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing-plugin" title="Signing plugin" class="md-nav__link">
    Signing plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tweaks" title="Tweaks" class="md-nav__link">
    Tweaks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-proxy-certs" title="Using proxy certs" class="md-nav__link">
    Using proxy certs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedures" title="Procedures" class="md-nav__link">
    Procedures
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-cert-switch" title="User cert switch" class="md-nav__link">
    User cert switch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-cas-for-user-authentication" title="Adding CAs for user authentication" class="md-nav__link">
    Adding CAs for user authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#koji-permissions" title="Koji Permissions" class="md-nav__link">
    Koji Permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renewing-host-and-service-certs" title="Renewing host and service certs" class="md-nav__link">
    Renewing host and service certs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../koji-inf-overview/" title="Koji Infrastructure Overview" class="md-nav__link">
      Koji Infrastructure Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../koji-policy-writing/" title="Koji Policy Writing" class="md-nav__link">
      Koji Policy Writing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../koji-user-management/" title="Koji User Management" class="md-nav__link">
      Koji User Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../madison-itb/" title="Madison ITB" class="md-nav__link">
      Madison ITB
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/writing-documentation/" title="Writing Documentation" class="md-nav__link">
      Writing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/reviewing-documentation/" title="Reviewing Documentation" class="md-nav__link">
      Reviewing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/style-guide/" title="Markdown Style Guide" class="md-nav__link">
      Markdown Style Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/new-doc-area/" title="Creating a New Area" class="md-nav__link">
      Creating a New Area
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/markdown-migration/" title="Migrating Documents to Markdown" class="md-nav__link">
      Migrating Documents to Markdown
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Historical Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Historical Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../koji-initial-install/" title="Koji Initial Install" class="md-nav__link">
      Koji Initial Install
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Historical Transitions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Historical Transitions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/sha2-support/" title="SHA-2 Support" class="md-nav__link">
      SHA-2 Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Meetings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Meetings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180730/" title="July 30, 2018" class="md-nav__link">
      July 30, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180723/" title="July 23, 2018" class="md-nav__link">
      July 23, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180716/" title="July 16, 2018" class="md-nav__link">
      July 16, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180702/" title="July 2, 2018" class="md-nav__link">
      July 2, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180625/" title="June 25, 2018" class="md-nav__link">
      June 25, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180618/" title="June 18, 2018" class="md-nav__link">
      June 18, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180611/" title="June 11, 2018" class="md-nav__link">
      June 11, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180604/" title="June 4, 2018" class="md-nav__link">
      June 4, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180529/" title="May 29, 2018" class="md-nav__link">
      May 29, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180514/" title="May 14, 2018" class="md-nav__link">
      May 14, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180507/" title="May 7, 2018" class="md-nav__link">
      May 7, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180430/" title="April 30, 2018" class="md-nav__link">
      April 30, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180423/" title="April 23, 2018" class="md-nav__link">
      April 23, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180416/" title="April 16, 2018" class="md-nav__link">
      April 16, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180409/" title="April 9, 2018" class="md-nav__link">
      April 9, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180402/" title="April 2, 2018" class="md-nav__link">
      April 2, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180312/" title="March 12, 2018" class="md-nav__link">
      March 12, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180305/" title="March 5, 2018" class="md-nav__link">
      March 5, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180226/" title="February 26, 2018" class="md-nav__link">
      February 26, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180219/" title="February 19, 2018" class="md-nav__link">
      February 19, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180212/" title="February 12, 2018" class="md-nav__link">
      February 12, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180205/" title="February 5, 2018" class="md-nav__link">
      February 5, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180129/" title="January 29, 2018" class="md-nav__link">
      January 29, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180122/" title="January 22, 2018" class="md-nav__link">
      January 22, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180108/" title="January 8, 2018" class="md-nav__link">
      January 8, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180102/" title="January 2, 2018" class="md-nav__link">
      January 2, 2018
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tags" title="Tags" class="md-nav__link">
    Tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-tags" title="Base tags" class="md-nav__link">
    Base tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dist-el9156793-build" title="dist-el[567]-build" class="md-nav__link">
    dist-el[567]-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-el9156793" title="osg-el[567]" class="md-nav__link">
    osg-el[567]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kojira-fake" title="kojira-fake" class="md-nav__link">
    kojira-fake
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#main-osg-tags" title="Main OSG tags" class="md-nav__link">
    Main OSG tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osg-39112393-el9156793-build" title="osg-3.[123]-el[567]-build" class="md-nav__link">
    osg-3.[123]-el[567]-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-upcoming-el9156793-build" title="osg-upcoming-el[567]-build" class="md-nav__link">
    osg-upcoming-el[567]-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-42-el9156793-development" title="osg-*-el[567]-development" class="md-nav__link">
    osg-*-el[567]-development
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-42-el9156793-testing" title="osg-*-el[567]-testing" class="md-nav__link">
    osg-*-el[567]-testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-42-el9156793-prerelease" title="osg-*-el[567]-prerelease" class="md-nav__link">
    osg-*-el[567]-prerelease
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-42-el9156793-release" title="osg-*-el[567]-release" class="md-nav__link">
    osg-*-el[567]-release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-39112393-el9156793-release-build" title="osg-3.[123]-el[567]-release-build" class="md-nav__link">
    osg-3.[123]-el[567]-release-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-39112393-el9156793-contrib" title="osg-3.[123]-el[567]-contrib" class="md-nav__link">
    osg-3.[123]-el[567]-contrib
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specialized-tags" title="Specialized tags" class="md-nav__link">
    Specialized tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#el916793-globus-and-el916793-globus-build" title="el[67]-globus and el[67]-globus-build" class="md-nav__link">
    el[67]-globus and el[67]-globus-build
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collaborator-tags" title="Collaborator Tags" class="md-nav__link">
    Collaborator Tags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hcc-42" title="hcc-*" class="md-nav__link">
    hcc-*
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-targets" title="Build Targets" class="md-nav__link">
    Build Targets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osg-el9156793_1" title="osg-el[567]" class="md-nav__link">
    osg-el[567]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-39112393-el9156793" title="osg-3.[123]-el[567]" class="md-nav__link">
    osg-3.[123]-el[567]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osg-upcoming-el9156793" title="osg-upcoming-el[567]" class="md-nav__link">
    osg-upcoming-el[567]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dist-el9156793-build_1" title="dist-el[567]-build" class="md-nav__link">
    dist-el[567]-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kojira-fake-42" title="kojira-fake-*" class="md-nav__link">
    kojira-fake-*
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hcc-el9156793-panda-el6" title="hcc-el[567], panda-el6" class="md-nav__link">
    hcc-el[567], panda-el6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing-plugin" title="Signing plugin" class="md-nav__link">
    Signing plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tweaks" title="Tweaks" class="md-nav__link">
    Tweaks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-proxy-certs" title="Using proxy certs" class="md-nav__link">
    Using proxy certs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedures" title="Procedures" class="md-nav__link">
    Procedures
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-cert-switch" title="User cert switch" class="md-nav__link">
    User cert switch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-cas-for-user-authentication" title="Adding CAs for user authentication" class="md-nav__link">
    Adding CAs for user authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#koji-permissions" title="Koji Permissions" class="md-nav__link">
    Koji Permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renewing-host-and-service-certs" title="Renewing host and service certs" class="md-nav__link">
    Renewing host and service certs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/technology-itb/edit/master/docs/infrastructure/koji-hub-setup.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="notes-on-koji-hub-setup">Notes on Koji-Hub Setup<a class="headerlink" href="#notes-on-koji-hub-setup" title="Permanent link">&para;</a></h1>
<p><a href="https://docs.pagure.org/koji/">Current Koji documentation</a> may be of use.</p>
<h2 id="tags">Tags<a class="headerlink" href="#tags" title="Permanent link">&para;</a></h2>
<h3 id="base-tags">Base tags<a class="headerlink" href="#base-tags" title="Permanent link">&para;</a></h3>
<h4 id="dist-el9156793-build">dist-el[567]-build<a class="headerlink" href="#dist-el9156793-build" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=dist-el%3F-build">Tag list</a></p>
<p>These tags contains 3 external repos each, hosted locally under <a href="http://mirror.batlab.org/pub/linux">http://mirror.batlab.org/pub/linux</a>:</p>
<ul>
<li><code>dist-el[567]-epel</code>: A mirror of the EPEL 5/6/7 repositories</li>
<li><code>dist-el[567]-centos*-os</code>: A mirror of the base CentOS repositories</li>
<li><code>dist-el[567]-centos*-updates*</code>: A mirror of the CentOS Updates repositories</li>
</ul>
<p>We don't put any packages in them (except for ones required for building, like <code>buildsys-macros</code> and <code>fetch-sources</code>), and generally don't build from them directly, but use tag inheritance.</p>
<h4 id="osg-el9156793">osg-el[567]<a class="headerlink" href="#osg-el9156793" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=osg-el%3F">Tag list</a></p>
<p>These tags contains all the <em>package names</em> that we put into OSG; <code>koji add-pkg</code> adds to them. <code>osg-build</code> does this automatically. The tags do not actually contain any builds (i.e. packages with version-release). All the other <code>osg-*</code> tags inherit from these (either directly or indirectly). The purpose of this is to make promoting builds easier, since it keeps you from having to run <code>add-pkg</code> when you promote.</p>
<h4 id="kojira-fake">kojira-fake<a class="headerlink" href="#kojira-fake" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/taginfo?tagID=10">Tag</a></p>
<p>This tag (and targets building to it) were created because <code>kojira</code> does not automatically regenerate a repo unless it's the source of another repo. Without this, the osg-development tags (for example) wouldn't get regenerated automatically after a build.</p>
<h3 id="main-osg-tags">Main OSG tags<a class="headerlink" href="#main-osg-tags" title="Permanent link">&para;</a></h3>
<h4 id="osg-39112393-el9156793-build">osg-3.[123]-el[567]-build<a class="headerlink" href="#osg-39112393-el9156793-build" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=osg-3.%3F-el%3F-build">Tag list</a></p>
<p>These are used to initialize the buildroot of most packages we make. They inherit from their respective dist-build and osg-development tags. The EL5 and EL6 tags also contain the <code>jpackage[56]-bin</code> external repos under <a href="http://mirror.batlab.org/pub/jpackage/">http://mirror.batlab.org/pub/jpackage/</a> since we use those for some builds.</p>
<p><strong>Note</strong> that the JPackage external repos must have a better priority than the OS and EPEL external repos to avoid build problems for Java packages.</p>
<h4 id="osg-upcoming-el9156793-build">osg-upcoming-el[567]-build<a class="headerlink" href="#osg-upcoming-el9156793-build" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=osg-upcoming-el%3F-build">Tag list</a></p>
<p>These tags are special in that they also need to inherit from the latest mainline osg-build repo (that is, if trunk is 3.3, then <code>osg-upcoming-el6-build</code> should inherit from <code>osg-3.3-el6-build</code>).</p>
<h4 id="osg-42-el9156793-development">osg-*-el[567]-development<a class="headerlink" href="#osg-42-el9156793-development" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=osg-*-el%3F-development">Tag list</a></p>
<p>These contain the builds in the <code>osg-minefield</code> repos. The <code>osg-development</code> repos hosted by the GOC take packages from this, so <code>osg-development</code> is pretty much <code>osg-minefield</code> after a 1-hour delay. They inherit from osg-testing (and occasionally from the more specialized branches like el5-gt52-experimental, though that is now discouraged). Builds that are made using the <code>osg-el[567]</code> targets (default if you're using <code>osg-build</code>) get their buildroots from the newest osg-build tags and put their results in the newest osg-development tags.</p>
<h4 id="osg-42-el9156793-testing">osg-*-el[567]-testing<a class="headerlink" href="#osg-42-el9156793-testing" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=osg-*-el%3F-testing">Tag list</a></p>
<p>These contain the builds in the <code>osg-testing</code> repos. They inherit from the respective <code>osg-release</code> tags.</p>
<h4 id="osg-42-el9156793-prerelease">osg-*-el[567]-prerelease<a class="headerlink" href="#osg-42-el9156793-prerelease" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=osg-*-el%3F-prerelease">Tag list</a></p>
<p>These are a staging are for packages that we are <em>certain</em> will be released in the next release. They are otherwise empty. These are used for testing and for building the tarball clients.</p>
<h4 id="osg-42-el9156793-release">osg-*-el[567]-release<a class="headerlink" href="#osg-42-el9156793-release" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=osg-*-el%3F-release">Tag list</a></p>
<p>These contain the builds in the <code>osg-release</code> repos. They should be locked except for when moving packages from the <code>osg-prerelease</code> repos to the <code>osg-release</code> repos. They inherit from <code>osg-el[567]</code>.</p>
<h4 id="osg-39112393-el9156793-release-build">osg-3.[123]-el[567]-release-build<a class="headerlink" href="#osg-39112393-el9156793-release-build" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=osg-3.%3F-el%3F-release-build">Tag list</a></p>
<p>These inherit the <code>dist-*-build</code> tags and the <code>osg-*-release</code> tags, putting a base OS along with OSG packages in a single repo, without the need for yum priorities. It is used, along with <code>osg-*-prerelease</code>, for building the tarball client. Note that there are no <code>release-build</code> repos for upcoming.</p>
<h4 id="osg-39112393-el9156793-contrib">osg-3.[123]-el[567]-contrib<a class="headerlink" href="#osg-39112393-el9156793-contrib" title="Permanent link">&para;</a></h4>
<p><a href="https://koji.chtc.wisc.edu/koji/search?match=glob&amp;type=tag&amp;terms=osg-*-contrib">Tag list</a></p>
<p>These contain the builds in the <code>osg-contrib</code> repos. Note that there are no <code>osg-upcoming-contrib</code> repos.</p>
<h3 id="specialized-tags">Specialized tags<a class="headerlink" href="#specialized-tags" title="Permanent link">&para;</a></h3>
<p>These tags are generally made for long projects which may be in an unstable state and should not interfere with the main development of OSG packages. An example is a full-scale Globus update, where many packages have to be built, using each other as dependencies, and the whole system is not considered usable until all the updates are done. They should generally be removed after the work is done.</p>
<h4 id="el916793-globus-and-el916793-globus-build">el[67]-globus and el[67]-globus-build<a class="headerlink" href="#el916793-globus-and-el916793-globus-build" title="Permanent link">&para;</a></h4>
<p>These tags were made by Matyas Selmeci for mass Globus updates.</p>
<h3 id="collaborator-tags">Collaborator Tags<a class="headerlink" href="#collaborator-tags" title="Permanent link">&para;</a></h3>
<h4 id="hcc-42">hcc-*<a class="headerlink" href="#hcc-42" title="Permanent link">&para;</a></h4>
<p>For use by the Holland Computing Center at UNL.</p>
<h2 id="build-targets">Build Targets<a class="headerlink" href="#build-targets" title="Permanent link">&para;</a></h2>
<p>A koji <em>target</em> pairs a build tag (which contains packages needed to build software) and a destination tag (which the software will be tagged into once it is built).</p>
<h3 id="osg-el9156793_1">osg-el[567]<a class="headerlink" href="#osg-el9156793_1" title="Permanent link">&para;</a></h3>
<p>These build from the osg-*-el[567]-build tags for the current release series into the osg-*-el[567]-development tags and are the primary targets used for building OSG software.</p>
<h3 id="osg-39112393-el9156793">osg-3.[123]-el[567]<a class="headerlink" href="#osg-39112393-el9156793" title="Permanent link">&para;</a></h3>
<p>These build from the osg-*-el[567]-build tags into the osg-*-el[567]-development tags and are used for building to releases other than the current one.</p>
<h3 id="osg-upcoming-el9156793">osg-upcoming-el[567]<a class="headerlink" href="#osg-upcoming-el9156793" title="Permanent link">&para;</a></h3>
<p>These build from the osg-upcoming-el[567]-build tags into the osg-upcoming-el[567]-development tags and are used for building to upcoming.</p>
<h3 id="dist-el9156793-build_1">dist-el[567]-build<a class="headerlink" href="#dist-el9156793-build_1" title="Permanent link">&para;</a></h3>
<p>These build from the <code>dist-el*-build</code> tag directly into the <code>dist-el*-build</code> tag. It is used for making builds that should be in every buildroot.</p>
<h3 id="kojira-fake-42">kojira-fake-*<a class="headerlink" href="#kojira-fake-42" title="Permanent link">&para;</a></h3>
<p>These fool kojira into regenerating their build tags as repos we can yum install from. Without this, the osg-development tags (for example) wouldn't get regenerated and osg-minefield wouldn't work.</p>
<h3 id="hcc-el9156793-panda-el6">hcc-el[567], panda-el6<a class="headerlink" href="#hcc-el9156793-panda-el6" title="Permanent link">&para;</a></h3>
<p>These were made for builds made for our collaborators to build into their tags.</p>
<h2 id="signing-plugin">Signing plugin<a class="headerlink" href="#signing-plugin" title="Permanent link">&para;</a></h2>
<p>The signing plugin is used to sign packages right after they are built. We give it a GPG signing key and corresponding passphrase. It is configured per build tag. The current default is to use the OSG key to sign if a configuration is not specified. This is because it's very difficult to sign packages after the fact, so it's better to erroneously sign some of them with the wrong key than to not sign them.</p>
<p>It is therefore important that whenever a new build tag is created, a corresponding config section for the signing plugin is added, too.</p>
<p>This comes from the package <code>koji-plugin-sign</code> and has configs in <code>/etc/koji-sign-plugin</code> and <code>/etc/koji-hub/plugins</code>. There is a script called <code>fix-permissions</code> in both directories that will make sure the plugin can read the config.</p>
<h2 id="tweaks">Tweaks<a class="headerlink" href="#tweaks" title="Permanent link">&para;</a></h2>
<p>These are local config changes we needed to make to get certain features to work.</p>
<h3 id="using-proxy-certs">Using proxy certs<a class="headerlink" href="#using-proxy-certs" title="Permanent link">&para;</a></h3>
<p><code>/etc/sysconfig/httpd</code> needed to be changed to include the following lines:</p>
<div class="codehilite"><pre><span></span>OPENSSL_ALLOW_PROXY=1
OPENSSL_ALLOW_PROXY_CERTS=1

export OPENSSL_ALLOW_PROXY
export OPENSSL_ALLOW_PROXY_CERTS
</pre></div>


<p>The user must use RFC proxies and must have a version of the koji client of 1.6.0-6.osg or newer.</p>
<h2 id="procedures">Procedures<a class="headerlink" href="#procedures" title="Permanent link">&para;</a></h2>
<h3 id="user-cert-switch">User cert switch<a class="headerlink" href="#user-cert-switch" title="Permanent link">&para;</a></h3>
<p>This procedure is now documented on the
<a href="../koji-user-management#handling-user-cert-changes-renaming-a-user">user management page</a>.</p>
<h3 id="adding-cas-for-user-authentication">Adding CAs for user authentication<a class="headerlink" href="#adding-cas-for-user-authentication" title="Permanent link">&para;</a></h3>
<p>Since our Koji instance uses certs for auth, we specify which CAs we trust for signing user certs. The CA certs for user auth are concatenated together in the file <code>/etc/pki/tls/certs/allowed-cas-for-users.crt</code>. A comment line before the <code>BEGIN CERTIFICATE</code> line is used to name the file the cert comes from. We take the certs from the <code>osg-ca-certs</code> repository.</p>
<p>For example, when I added the CERN CAs to the bundle, I installed osg-ca-certs onto a Fermicloud VM, copied <code>/etc/grid-security/certificates/CERN-TCA.pem</code> (which signed user certs) and <code>CERN-Root.pem</code> (which signed <code>CERN-TCA.pem</code>) to <code>koji.chtc.wisc.edu</code>, catted them to the end of the <code>allowed-cas-for-users.crt</code> file, edited the file to add comments before the certs, and restarted <code>httpd</code>.</p>
<p>A few tidbits of knowledge for administrators of our Koji server:</p>
<ul>
<li>Three services need to be running for koji-hub to be functioning: kojira, kojid, and the Apache web server. To restart these:<ul>
<li>service kojid restart</li>
<li>service kojira restart</li>
<li>service httpd restart</li>
</ul>
</li>
<li>Logfiles can be found here:<ul>
<li>/var/log/kojid.log</li>
<li>/var/log/kojira.log</li>
<li>/var/log/messages</li>
</ul>
</li>
<li>kojid is configured to stop starting new tasks if it has less than 8GB free.</li>
<li>Failed build roots are kept for 4 hours, and each build root is about 1GB currently. Hence, if too many tasks fail, the kojid might stop accepting new tasks for 4 hours.<ul>
<li>Manually clean these out.</li>
</ul>
</li>
</ul>
<h3 id="koji-permissions">Koji Permissions<a class="headerlink" href="#koji-permissions" title="Permanent link">&para;</a></h3>
<p>To add a new user to Koji for someone with a given DN, first extract the CN. For example, Alain has the DN <code>/DC=org/DC=doegrids/OU=People/CN=Alain Roy 424511</code>, and the CN is just <code>Alain Roy 424511</code>. The commands below use just the CN.</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@client ~]$</span> osg-koji add-user <span class="s2">&quot;&lt;CN&gt;&quot;</span>
<span class="gp">[you@client ~]$</span> osg-koji grant-permission build <span class="s2">&quot;&lt;CN&gt;&quot;</span>
<span class="gp">[you@client ~]$</span> osg-koji grant-permission repo <span class="s2">&quot;&lt;CN&gt;&quot;</span>
</pre></div>


<p>If you want to see the set of possible permissions:</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@client ~]$</span> koji list-permissions 
<span class="go">Enter PEM pass phrase: </span>
<span class="go">admin</span>
<span class="go">build</span>
<span class="go">repo</span>
<span class="go">livecd</span>
<span class="go">maven-import</span>
<span class="go">win-import</span>
<span class="go">win-admin</span>
<span class="go">appliance</span>
</pre></div>


<p>If you want to see someone's permissions:</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@client ~]$</span> koji list-permissions --user <span class="s2">&quot;Alain Roy 424511&quot;</span>
<span class="go">Enter PEM pass phrase: </span>
<span class="go">admin</span>
</pre></div>


<p>If you want to see your own permissions:</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@client ~]$</span> koji list-permissions --mine
<span class="go">Enter PEM pass phrase: </span>
<span class="go">admin</span>
</pre></div>


<p>To see the list of users:</p>
<div class="codehilite"><pre><span></span><span class="gp">[you@client ~]$</span> koji search user <span class="s2">&quot;*&quot;</span>
</pre></div>


<h3 id="renewing-host-and-service-certs">Renewing host and service certs<a class="headerlink" href="#renewing-host-and-service-certs" title="Permanent link">&para;</a></h3>
<p>Certs and keys are stored in <code>/p/condor/home/certificates/...</code></p>
<p>To obtain renewed certificates, use <a href="https://opensciencegrid.github.io/docs/security/certificate-management/#osg-pki-command-line-clients.md">the OSG PKI commandline clients</a> or the web interface at <a href="https://oim.opensciencegrid.org/oim/certificaterequesthost">https://oim.opensciencegrid.org/oim/certificaterequesthost</a>.</p>
<p>The following cert files are necessary:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hostcert.pem</code></td>
<td>koji.chtc host cert (<code>CN=koji.chtc.wisc.edu</code>)</td>
</tr>
<tr>
<td><code>hostkey.pem</code></td>
<td>koji.chtc host key</td>
</tr>
<tr>
<td><code>kojiracert.pem</code></td>
<td>koji.chtc/kojira service cert (<code>CN=koji.chtc.wisc.edu/kojira</code>)</td>
</tr>
<tr>
<td><code>kojirakey.pem</code></td>
<td>koji.chtc/kojira service key</td>
</tr>
<tr>
<td><code>kojiweb.pem</code></td>
<td>Concatenation of <code>hostcert.pem</code> and <code>hostkey.pem</code></td>
</tr>
<tr>
<td><code>kojira.pem</code></td>
<td>Concatenation of <code>kojiracert.pem</code> and <code>kojirakey.pem</code></td>
</tr>
</tbody>
</table>
<p>To create <code>kojiweb.pem</code> and <code>kojira.pem</code> from their respective cert/key files, do:</p>
<div class="codehilite"><pre><span></span><span class="gp">[root@koji ~]#</span> <span class="o">(</span>dos2unix &lt; hostcert.pem<span class="p">;</span> echo<span class="p">;</span> dos2unix &lt; hostkey.pem<span class="o">)</span> &gt; kojiweb.pem
<span class="gp">[root@koji ~]#</span> chmod <span class="m">0600</span> kojiweb.pem
<span class="gp">[root@koji ~]#</span> <span class="o">(</span>dos2unix &lt; kojiracert.pem<span class="p">;</span> echo<span class="p">;</span> dos2unix &lt; kojirakey.pem<span class="o">)</span> &gt; kojira.pem
<span class="gp">[root@koji ~]#</span> chmod <span class="m">0600</span> kojira.pem
</pre></div>


<p>As <code>root</code> in <code>/etc</code> on <code>koji.chtc.wisc.edu</code>:</p>
<ol>
<li>Run <code>git status</code>.</li>
<li>Run <code>etckeeper commit</code> to commit any uncommited changes (including unversioned files).</li>
</ol>
<p>Put the files onto <code>koji.chtc.wisc.edu</code> as follows:</p>
<table>
<thead>
<tr>
<th align="left">File</th>
<th align="left">Location</th>
<th align="left">chown</th>
<th align="left">chmod</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>hostcert.pem</code></td>
<td align="left"><code>/etc/pki/tls/certs/hostcert.pem</code></td>
<td align="left"><code>root:root</code></td>
<td align="left"><code>0644</code></td>
</tr>
<tr>
<td align="left"><code>hostkey.pem</code></td>
<td align="left"><code>/etc/pki/tls/private/hostkey.pem</code></td>
<td align="left"><code>root:root</code></td>
<td align="left"><code>0600</code></td>
</tr>
<tr>
<td align="left"><code>kojiweb.pem</code></td>
<td align="left"><code>/etc/pki/tls/private/kojiweb.pem</code></td>
<td align="left"><code>apache:apache</code></td>
<td align="left"><code>0600</code></td>
</tr>
<tr>
<td align="left"><code>kojira.pem</code></td>
<td align="left"><code>/etc/pki/tls/private/kojira.pem</code></td>
<td align="left"><code>root:root</code></td>
<td align="left"><code>0600</code></td>
</tr>
</tbody>
</table>
<ol>
<li>Shut down <code>kojira</code> and <code>kojid</code>.</li>
<li>Restart <code>httpd</code>.</li>
<li>Log in via your own cert to the web interface to verify that it is working.</li>
<li>Run <code>osg-koji list-permissions --mine</code> to verify command-line access is working.</li>
<li>Run <code>etckeeper commit</code> to commit your changes in <code>/etc</code>.</li>
<li>Start up <code>kojira</code> and <code>kojid</code>.</li>
</ol>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../koji-restore-recipe/" title="Koji Restore Recipe" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Koji Restore Recipe
              </span>
            </div>
          </a>
        
        
          <a href="../koji-inf-overview/" title="Koji Infrastructure Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Koji Infrastructure Overview
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.30f6b8b1.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>