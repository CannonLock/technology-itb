



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
  <meta name="robots" content="noindex, nofollow" />

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://opensciencegrid.github.io/technology-itb/release/acceptance-testing/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Acceptance Testing - OSG Technology Area (ITB)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/itb.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#acceptance-testing" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://opensciencegrid.github.io/technology-itb/" title="OSG Technology Area (ITB)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                OSG Technology Area (ITB)
              </span>
              <span class="md-header-nav__topic">
                Acceptance Testing
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/opensciencegrid/technology-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://opensciencegrid.github.io/technology-itb/" title="OSG Technology Area (ITB)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    OSG Technology Area (ITB)
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/opensciencegrid/technology-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Software
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Software
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Packaging
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Packaging
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/rpm-development-guide/" title="RPM Development Guide" class="md-nav__link">
      RPM Development Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/osg-build-tools/" title="OSG Build Tools" class="md-nav__link">
      OSG Build Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/quilt/" title="Using Quilt" class="md-nav__link">
      Using Quilt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/upcoming-to-main/" title="Upcoming to Main" class="md-nav__link">
      Upcoming to Main
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/koji-workflow/" title="Koji Workflow" class="md-nav__link">
      Koji Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/create-vo-client/" title="Creating the VO Client Package" class="md-nav__link">
      Creating the VO Client Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/repository-management/" title="Repository Management" class="md-nav__link">
      Repository Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/globus-mass-update-procedure/" title="Globus Mass Update Procedure" class="md-nav__link">
      Globus Mass Update Procedure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/resurrecting-epel-packages/" title="Resurrecting Epel Packages" class="md-nav__link">
      Resurrecting Epel Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/koji-mass-rebuilds/" title="Koji Mass Rebuilds" class="md-nav__link">
      Koji Mass Rebuilds
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/development-process/" title="Development Process" class="md-nav__link">
      Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/git-software-development/" title="Git Software Development Process" class="md-nav__link">
      Git Software Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/ce-test-scaling/" title="CE Scale Testing" class="md-nav__link">
      CE Scale Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/ipv6-testing/" title="IPv6 Testing" class="md-nav__link">
      IPv6 Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/software-support/" title="Software Support" class="md-nav__link">
      Software Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/effort-tracking/" title="Effort Tracking" class="md-nav__link">
      Effort Tracking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/release-planning/" title="Release Planning" class="md-nav__link">
      Release Planning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/new-team-member/" title="New Team Member" class="md-nav__link">
      New Team Member
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Release
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Release
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cut-sw-release/" title="How to Cut a Release" class="md-nav__link">
      How to Cut a Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cut-data-release/" title="How to Cut a Data Release" class="md-nav__link">
      How to Cut a Data Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../release-policy/" title="Release Policy" class="md-nav__link">
      Release Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../new-release-series/" title="New Release Series" class="md-nav__link">
      New Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../old-release-removal/" title="Old Release Series Removal" class="md-nav__link">
      Old Release Series Removal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../itb-testing/" title="ITB Prerelease Testing" class="md-nav__link">
      ITB Prerelease Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../empty-pkgs/" title="Empty Packages" class="md-nav__link">
      Empty Packages
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Acceptance Testing
      </label>
    
    <a href="./" title="Acceptance Testing" class="md-nav__link md-nav__link--active">
      Acceptance Testing
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cvmfs" title="CVMFS" class="md-nav__link">
    CVMFS
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-repository-server-stratum-0" title="Creating a CVMFS Repository Server (Stratum 0)" class="md-nav__link">
    Creating a CVMFS Repository Server (Stratum 0)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-replica-server-stratum-1" title="Creating a CVMFS Replica Server (Stratum 1)" class="md-nav__link">
    Creating a CVMFS Replica Server (Stratum 1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-client" title="Creating a CVMFS client" class="md-nav__link">
    Creating a CVMFS client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-oasis-client" title="Creating an OASIS client" class="md-nav__link">
    Creating an OASIS client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-documentation" title="Additional Documentation" class="md-nav__link">
    Additional Documentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gratia-probe" title="Gratia Probe" class="md-nav__link">
    Gratia Probe
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gsi-openssh" title="GSI OpenSSH" class="md-nav__link">
    GSI OpenSSH
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#htcondor-ce-collector-wip" title="HTCondor-CE Collector (WIP)" class="md-nav__link">
    HTCondor-CE Collector (WIP)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-collector" title="Setting Up the Collector" class="md-nav__link">
    Setting Up the Collector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-the-ce" title="Setting Up the CE" class="md-nav__link">
    Setting Up the CE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rsv" title="RSV" class="md-nav__link">
    RSV
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slurm" title="Slurm" class="md-nav__link">
    Slurm
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-and-setup" title="Installation and setup" class="md-nav__link">
    Installation and setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-a-job-using-slurm" title="Running a job using slurm" class="md-nav__link">
    Running a job using slurm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vo-client" title="VO Client" class="md-nav__link">
    VO Client
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-voms-proxy-init" title="Testing voms-proxy-init" class="md-nav__link">
    Testing voms-proxy-init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-edg-mkgridmap" title="Testing edg-mkgridmap" class="md-nav__link">
    Testing edg-mkgridmap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-gums" title="Testing GUMS" class="md-nav__link">
    Testing GUMS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voms-admin-server" title="VOMS Admin Server" class="md-nav__link">
    VOMS Admin Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-and-configure-voms-admin-server" title="Install and configure voms-admin-server" class="md-nav__link">
    Install and configure voms-admin-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-up-test_vo-and-add-yourself-as-an-admin" title="Set up TEST_VO and add yourself as an admin" class="md-nav__link">
    Set up TEST_VO and add yourself as an admin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-the-web-ui" title="Testing the web UI" class="md-nav__link">
    Testing the web UI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xrootd-voms-testing" title="XRootD VOMS Testing" class="md-nav__link">
    XRootD VOMS Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xrootd-plugins" title="XRootD Plugins" class="md-nav__link">
    XRootD Plugins
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hadoop-name-node-installation" title="Hadoop name node installation" class="md-nav__link">
    Hadoop name node installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hadoop-data-node-installation" title="Hadoop data node installation" class="md-nav__link">
    Hadoop data node installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gridftp-installation" title="GridFTP installation" class="md-nav__link">
    GridFTP installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-name-node" title="On the name node" class="md-nav__link">
    On the name node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Policy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Policy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/service-migrations-spring-2018/" title="Service Migrations - Spring 2018" class="md-nav__link">
      Service Migrations - Spring 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/gums-retire/" title="GUMS Retirement" class="md-nav__link">
      GUMS Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/bestman2-retire/" title="BeStMan2 Retirement" class="md-nav__link">
      BeStMan2 Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/voms-admin-retire/" title="VOMS Admin Retirement" class="md-nav__link">
      VOMS Admin Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/release-series/" title="Release Series Support" class="md-nav__link">
      Release Series Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/globus-toolkit/" title="Globus Toolkit Support" class="md-nav__link">
      Globus Toolkit Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/external-oasis-repos/" title="OASIS Repository Mirroring" class="md-nav__link">
      OASIS Repository Mirroring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/flexible-release-model/" title="Flexible Release Model" class="md-nav__link">
      Flexible Release Model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Infrastructure
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Infrastructure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-restore-recipe/" title="Koji Restore Recipe" class="md-nav__link">
      Koji Restore Recipe
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-hub-setup/" title="Koji-Hub Setup" class="md-nav__link">
      Koji-Hub Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-inf-overview/" title="Koji Infrastructure Overview" class="md-nav__link">
      Koji Infrastructure Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-policy-writing/" title="Koji Policy Writing" class="md-nav__link">
      Koji Policy Writing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-user-management/" title="Koji User Management" class="md-nav__link">
      Koji User Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/madison-itb/" title="Madison ITB" class="md-nav__link">
      Madison ITB
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/writing-documentation/" title="Writing Documentation" class="md-nav__link">
      Writing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/reviewing-documentation/" title="Reviewing Documentation" class="md-nav__link">
      Reviewing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/style-guide/" title="Markdown Style Guide" class="md-nav__link">
      Markdown Style Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/new-doc-area/" title="Creating a New Area" class="md-nav__link">
      Creating a New Area
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/markdown-migration/" title="Migrating Documents to Markdown" class="md-nav__link">
      Migrating Documents to Markdown
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Historical Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Historical Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-initial-install/" title="Koji Initial Install" class="md-nav__link">
      Koji Initial Install
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Historical Transitions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Historical Transitions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/sha2-support/" title="SHA-2 Support" class="md-nav__link">
      SHA-2 Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Meetings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Meetings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20181015/" title="October 15, 2018" class="md-nav__link">
      October 15, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20181008/" title="October 8, 2018" class="md-nav__link">
      October 8, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20181001/" title="October 1, 2018" class="md-nav__link">
      October 1, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180924/" title="September 24, 2018" class="md-nav__link">
      September 24, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180917/" title="September 17, 2018" class="md-nav__link">
      September 17, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180910/" title="September 10, 2018" class="md-nav__link">
      September 10, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180827/" title="August 27, 2018" class="md-nav__link">
      August 27, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180820/" title="August 20, 2018" class="md-nav__link">
      August 20, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180813/" title="August 13, 2018" class="md-nav__link">
      August 13, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180806/" title="August 6, 2018" class="md-nav__link">
      August 6, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180730/" title="July 30, 2018" class="md-nav__link">
      July 30, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180723/" title="July 23, 2018" class="md-nav__link">
      July 23, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180716/" title="July 16, 2018" class="md-nav__link">
      July 16, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180702/" title="July 2, 2018" class="md-nav__link">
      July 2, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180625/" title="June 25, 2018" class="md-nav__link">
      June 25, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180618/" title="June 18, 2018" class="md-nav__link">
      June 18, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180611/" title="June 11, 2018" class="md-nav__link">
      June 11, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180604/" title="June 4, 2018" class="md-nav__link">
      June 4, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180529/" title="May 29, 2018" class="md-nav__link">
      May 29, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180514/" title="May 14, 2018" class="md-nav__link">
      May 14, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180507/" title="May 7, 2018" class="md-nav__link">
      May 7, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180430/" title="April 30, 2018" class="md-nav__link">
      April 30, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180423/" title="April 23, 2018" class="md-nav__link">
      April 23, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180416/" title="April 16, 2018" class="md-nav__link">
      April 16, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180409/" title="April 9, 2018" class="md-nav__link">
      April 9, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180402/" title="April 2, 2018" class="md-nav__link">
      April 2, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180312/" title="March 12, 2018" class="md-nav__link">
      March 12, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180305/" title="March 5, 2018" class="md-nav__link">
      March 5, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180226/" title="February 26, 2018" class="md-nav__link">
      February 26, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180219/" title="February 19, 2018" class="md-nav__link">
      February 19, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180212/" title="February 12, 2018" class="md-nav__link">
      February 12, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180205/" title="February 5, 2018" class="md-nav__link">
      February 5, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180129/" title="January 29, 2018" class="md-nav__link">
      January 29, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180122/" title="January 22, 2018" class="md-nav__link">
      January 22, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180108/" title="January 8, 2018" class="md-nav__link">
      January 8, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180102/" title="January 2, 2018" class="md-nav__link">
      January 2, 2018
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cvmfs" title="CVMFS" class="md-nav__link">
    CVMFS
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-repository-server-stratum-0" title="Creating a CVMFS Repository Server (Stratum 0)" class="md-nav__link">
    Creating a CVMFS Repository Server (Stratum 0)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-replica-server-stratum-1" title="Creating a CVMFS Replica Server (Stratum 1)" class="md-nav__link">
    Creating a CVMFS Replica Server (Stratum 1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-client" title="Creating a CVMFS client" class="md-nav__link">
    Creating a CVMFS client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-oasis-client" title="Creating an OASIS client" class="md-nav__link">
    Creating an OASIS client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-documentation" title="Additional Documentation" class="md-nav__link">
    Additional Documentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gratia-probe" title="Gratia Probe" class="md-nav__link">
    Gratia Probe
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gsi-openssh" title="GSI OpenSSH" class="md-nav__link">
    GSI OpenSSH
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#htcondor-ce-collector-wip" title="HTCondor-CE Collector (WIP)" class="md-nav__link">
    HTCondor-CE Collector (WIP)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-collector" title="Setting Up the Collector" class="md-nav__link">
    Setting Up the Collector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-the-ce" title="Setting Up the CE" class="md-nav__link">
    Setting Up the CE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rsv" title="RSV" class="md-nav__link">
    RSV
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slurm" title="Slurm" class="md-nav__link">
    Slurm
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-and-setup" title="Installation and setup" class="md-nav__link">
    Installation and setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-a-job-using-slurm" title="Running a job using slurm" class="md-nav__link">
    Running a job using slurm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vo-client" title="VO Client" class="md-nav__link">
    VO Client
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" title="Prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-voms-proxy-init" title="Testing voms-proxy-init" class="md-nav__link">
    Testing voms-proxy-init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-edg-mkgridmap" title="Testing edg-mkgridmap" class="md-nav__link">
    Testing edg-mkgridmap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-gums" title="Testing GUMS" class="md-nav__link">
    Testing GUMS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voms-admin-server" title="VOMS Admin Server" class="md-nav__link">
    VOMS Admin Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-and-configure-voms-admin-server" title="Install and configure voms-admin-server" class="md-nav__link">
    Install and configure voms-admin-server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-up-test_vo-and-add-yourself-as-an-admin" title="Set up TEST_VO and add yourself as an admin" class="md-nav__link">
    Set up TEST_VO and add yourself as an admin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-the-web-ui" title="Testing the web UI" class="md-nav__link">
    Testing the web UI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xrootd-voms-testing" title="XRootD VOMS Testing" class="md-nav__link">
    XRootD VOMS Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xrootd-plugins" title="XRootD Plugins" class="md-nav__link">
    XRootD Plugins
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hadoop-name-node-installation" title="Hadoop name node installation" class="md-nav__link">
    Hadoop name node installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hadoop-data-node-installation" title="Hadoop data node installation" class="md-nav__link">
    Hadoop data node installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gridftp-installation" title="GridFTP installation" class="md-nav__link">
    GridFTP installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-name-node" title="On the name node" class="md-nav__link">
    On the name node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/technology-itb/edit/master/docs/release/acceptance-testing.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="acceptance-testing">Acceptance Testing<a class="headerlink" href="#acceptance-testing" title="Permanent link">&para;</a></h1>
<p>The OSG Release Team collects and maintains testing procedures for major components in the OSG Sofware Stack. These test should verify that basic functionality of the component works in typically deployed configurations.</p>
<h2 id="cvmfs">CVMFS<a class="headerlink" href="#cvmfs" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This acceptance testing recipe was created when access to a machine with sufficient disk space to make a complete replica of OASIS was not available.</p>
</div>
<h3 id="creating-a-cvmfs-repository-server-stratum-0">Creating a CVMFS Repository Server (Stratum 0)<a class="headerlink" href="#creating-a-cvmfs-repository-server-stratum-0" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Disable SELinux by setting the following in <code>/etc/selinux/config</code>.</p>
<div class="codehilite"><pre><span></span>SELINUX=disabled
</pre></div>


</li>
<li>
<p>Check kernel version.</p>
<div class="codehilite"><pre><span></span><span class="go">uname -a</span>
</pre></div>


</li>
<li>
<p>CVMFS for EL7 requires OverlayFS (as of kernel version 4.2.x). If default kernel is &lt;= 4.2.x, update kernel.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> rpm --import &lt;https://www.elrepo.org/RPM-GPG-KEY-elrepo.org&gt;
<span class="gp">root@host #</span> rpm -Uvh &lt;http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm&gt;
<span class="gp">root@host #</span> yum install yum-plugin-fastestmirror
<span class="gp">root@host #</span> yum --enablerepo<span class="o">=</span>elrepo-kernel install kernel-ml
</pre></div>


</li>
<li>
<p>Select updated kernel by editing <code>/etc/default/grub</code>.</p>
<div class="codehilite"><pre><span></span>GRUB_DEFAULT=0
</pre></div>


<p>and run:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> grub2-mkconfig -o /boot/grub2/grub.cfg
</pre></div>


</li>
<li>
<p>Reboot system. </p>
</li>
<li>
<p>Check kernel version again and make sure SELinux is disabled.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> uname -a
<span class="gp">root@host #</span> sestatus
</pre></div>


</li>
<li>
<p>If kernel &gt;= 4.2 and SELinux is disabled, then update system and install CVMFS server and client packages.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum update
<span class="gp">root@host #</span> yum install epel-release
<span class="gp">root@host #</span> yum install yum-plugin-priorities
<span class="gp">root@host #</span> rpm -Uvh &lt;https://repo.opensciencegrid.org/osg/3.3/osg-3.3-el7-release-latest.rpm&gt;
<span class="gp">root@host #</span> yum install cvmfs cvmfs-server
</pre></div>


</li>
<li>
<p>Configure web server and start it up. Edit <code>/etc/httpd/conf.d/cvmfs.conf</code>:</p>
<div class="codehilite"><pre><span></span>Listen 8000
KeepAlive On
</pre></div>


<p>and run:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> chkconfig httpd on
<span class="gp">root@host #</span> service httpd start
</pre></div>


</li>
<li>
<p>Make new repository.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cvmfs_server mkfs test.cvmfs-stratum-0.novalocal
</pre></div>


</li>
<li>
<p>Run transaction on new repository to enable write access.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cvmfs_server transaction test.cvmfs-stratum-0.novalocal
</pre></div>


</li>
<li>
<p>Place some sample code in new repository directory and then publish it.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> <span class="nb">cd</span> /cvmfs/test.cvmfs-stratum-0.novalocal
<span class="gp">root@host #</span> vi <span class="o">[</span>bash<span class="se">\_</span>pi.sh<span class="o">](</span>%ATTACHURL%/bash_pi.sh<span class="o">)</span>
<span class="gp">root@host #</span> chmod +x bash<span class="se">\_</span>pi.sh
<span class="gp">root@host #</span> cvmfs<span class="se">\_</span>server publish test.cvmfs-stratum-0.novalocal
</pre></div>


</li>
<li>
<p>Check repository status after publication.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cvmfs<span class="se">\_</span>server check
<span class="gp">root@host #</span> cvmfs<span class="se">\_</span>server tag
<span class="gp">root@host #</span> wget -qO- &lt;http://localhost:8000/cvmfs/test.cvmfs-stratum-0.novalocal/.cvmfswhitelist%7Ccat&gt; -v
</pre></div>


</li>
<li>
<p>Download a copy of the CVMFS repository's public key e.g., /etc/cvmfs/keys/test.cvmfs-stratum-0.novalocal.pub</p>
</li>
</ol>
<h3 id="creating-a-cvmfs-replica-server-stratum-1">Creating a CVMFS Replica Server (Stratum 1)<a class="headerlink" href="#creating-a-cvmfs-replica-server-stratum-1" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Repeat steps 1 though 8 in the previous section on "Creating a CVMFS Repository Server ". However, now also install <code>mod_wsgi</code>.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install cvmfs cvmfs-server mod<span class="se">\_</span>wsgi
</pre></div>


</li>
<li>
<p>Upload a copy of the CVMFS repository's public key and place in <code>/etc/cvmfs/keys</code> directory. </p>
</li>
<li>
<p>Add replica of the repository.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cvmfs_server add-replica -o root &lt;http://10.128.3.96:8000/cvmfs/test.cvmfs-stratum-0.novalocal&gt; /etc/cvmfs/keys/test.cvmfs-stratum-0.novalocal.pub
</pre></div>


</li>
<li>
<p>Make a snapshot of the repository.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cvmfs<span class="se">\_</span>server snapshot test.cvmfs-stratum-0.novalocal
</pre></div>


</li>
</ol>
<h3 id="creating-a-cvmfs-client">Creating a CVMFS client<a class="headerlink" href="#creating-a-cvmfs-client" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Update system and install CVMFS client package.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum update
<span class="gp">root@host #</span> yum install epel-release
<span class="gp">root@host #</span> yum install yum-plugin-priorities
<span class="gp">root@host #</span> rpm -Uvh &lt;https://repo.opensciencegrid.org/osg/3.3/osg-3.3-el7-release-latest.rpm&gt;
<span class="gp">root@host #</span> yum install cvmfs
</pre></div>


</li>
<li>
<p>Upload a copy of the CVMFS repository's public key and place in <code>/etc/cvmfs/keys</code> directory.</p>
</li>
<li>
<p>Edit fuse configuration <code>/etc/fuse.conf</code>.</p>
<div class="codehilite"><pre><span></span>user_allow_other
</pre></div>


</li>
<li>
<p>Edit autofs configuration and restart service <code>/etc/auto.master</code>.</p>
<div class="codehilite"><pre><span></span>/cvmfs /etc/auto.cvmfs
</pre></div>


<p>and run:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> service autofs restart
</pre></div>


</li>
<li>
<p>Edit cvmfs configuration (<code>/etc/cvmfs/default.local</code>) to point to replica server.</p>
<div class="codehilite"><pre><span></span><span class="n">CVMFS_SERVER_URL</span><span class="o">=</span><span class="s">&quot;http://10.128.3.97:8000/cvmfs/@fqrn@&quot;</span>
<span class="n">CVMFS_REPOSITORIES</span><span class="o">=</span><span class="s">&quot;test.cvmfs-stratum-0.novalocal&quot;</span>
<span class="n">CVMFS_HTTP_PROXY</span><span class="o">=</span><span class="n">DIRECT</span>
</pre></div>


</li>
<li>
<p>Remove OSG CVMFS configuration file.</p>
<div class="codehilite"><pre><span></span><span class="go">rm /etc/cvmfs/default.d/60-osg.conf</span>
</pre></div>


</li>
<li>
<p>Run CVMFS config probe.</p>
<div class="codehilite"><pre><span></span><span class="go">cvmfs_config probe test.cvmfs-stratum-0.novalocal</span>
</pre></div>


</li>
<li>
<p>Check CVMFS config status.</p>
<div class="codehilite"><pre><span></span><span class="go">cvmfs_config stat -v test.cvmfs-stratum-0.novalocal</span>
</pre></div>


</li>
<li>
<p>Execute sample code published to repository from client.</p>
<div class="codehilite"><pre><span></span><span class="go">/cvmfs/test.cvmfs-stratum-0.novalocal/bash_pi.sh -b 8 -r 5 -s 10000</span>
</pre></div>


</li>
</ol>
<h3 id="creating-an-oasis-client">Creating an OASIS client<a class="headerlink" href="#creating-an-oasis-client" title="Permanent link">&para;</a></h3>
<ol>
<li>Update system and install CVMFS client package.<ul>
<li>yum update</li>
<li>yum install epel-release</li>
<li>yum install yum-plugin-priorities</li>
<li>rpm -Uvh <a href="https://repo.opensciencegrid.org/osg/3.3/osg-3.3-el7-release-latest.rpm">https://repo.opensciencegrid.org/osg/3.3/osg-3.3-el7-release-latest.rpm</a></li>
<li>yum install osg-oasis </li>
</ul>
</li>
<li>Verify latest versions of cvmfs, cvmfs-config-osg, and cvmfs-x509-helper have been installed. </li>
<li>Edit fuse configuration.<ul>
<li>vi /etc/fuse.conf<ul>
<li>user_allow_other </li>
</ul>
</li>
</ul>
</li>
<li>Edit cvmfs configuration to point to replica server.<ul>
<li>vi /etc/cvmfs/default.local<ul>
<li>CVMFS_REPOSITORIES="`echo $((echo oasis.opensciencegrid.org;echo cms.cern.ch;ls /cvmfs)|sort -u)|tr ' ' ,`"</li>
<li>CVMFS_QUOTA_LIMIT=20000</li>
<li>CVMFS_HTTP_PROXY=DIRECT</li>
</ul>
</li>
</ul>
</li>
<li>Edit autofs configuration and restart service.<ul>
<li>vi /etc/auto.master<ul>
<li>/cvmfs /etc/auto.cvmfs</li>
</ul>
</li>
<li>service autofs restart</li>
</ul>
</li>
<li>Run CVMFS config probe.<ul>
<li>cvmfs_config probe </li>
</ul>
</li>
<li>Check CVMFS config status.<ul>
<li>cvmfs_config stat -v oasis.opensciencegrid.org</li>
</ul>
</li>
</ol>
<h3 id="additional-documentation">Additional Documentation<a class="headerlink" href="#additional-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://cvmfs.readthedocs.io/en/stable/">CERN's CVMFS Documentation</a></li>
<li><a href="https://www.opensciencegrid.org/docs/other/install-cvmfs-stratum1/">OSG's CVMFS Replica Server</a></li>
<li><a href="https://www.opensciencegrid.org/docs/worker-node/install-cvmfs/">OSG's CVMFS Client Documentation</a></li>
<li>
<p><a href="https://www.opensciencegrid.org/docs/data/external-oasis-repos/">OSG's OASIS Documentation</a></p>
</li>
<li>
<p><a href="../bash_pi.sh">bash_pi.sh</a>: A bash script that uses a simple Monte Carlo method to estimate the value of Pi</p>
</li>
</ul>
<h2 id="gratia-probe">Gratia Probe<a class="headerlink" href="#gratia-probe" title="Permanent link">&para;</a></h2>
<p>This section documents the testing procedure to test the gratia probes sufficiently tested to be promoted to the osg-testing repository. The test procedure is the same on both SL6 and SL7.</p>
<ul>
<li>install or update the <code>gratia-probe-condor</code> rpm as appropriate</li>
<li>On each VM download the gratia-probe-setup.sh script and run it</li>
<li>In <code>/etc/gratia/condor/ProbeConfig</code>, verify the following have been changed:<ul>
<li>change <code>SiteName</code> to something aside from <code>Generic Site</code></li>
<li>change <code>EnableProbe</code> to 1</li>
<li>change <code>CollectorHost</code>, <code>SSLHost</code>, and <code>SSLRegistrationHost</code> to the an invalid host (E.g. test.com) or the localhost</li>
</ul>
</li>
<li>Create <code>/var/lib/osg/</code> and download the attached <code>user-vo-map</code> file and place it in that directory</li>
<li>Edit the <code>user-vo-map</code> file and change the account from <code>sthapa</code> to the account you'll be using to submit the condor jobs in the following step</li>
<li>Download and submit the attached condor_submit file (note, on the default fermicloud VM, this takes about 3 hours, so you may want to set <code>NUM_CPUS</code> to 50 so that 50 jobs will run at a time)</li>
<li>Run <code>/usr/share/gratia/condor/condor_meter</code></li>
<li>Check <code>/var/lib/gratia/tmp/gratiafiles/</code> for a <code>subdir.condor_...</code> directory and verify that there are 200 xml jobs and the cpus/wall times are appropriate (either PT0S or PT1M).</li>
</ul>
<h2 id="gsi-openssh">GSI OpenSSH<a class="headerlink" href="#gsi-openssh" title="Permanent link">&para;</a></h2>
<p>To test a fresh installation:</p>
<ol>
<li>Spin up two VM's and set up the EPEL/OSG repos on both of them.</li>
<li>Choose one of the VM's, it will be the server VM. Consult these <a href="https://www.opensciencegrid.org/docs/other/gsissh/">instructions</a> to set up the server.</li>
<li>
<p>From the other VM (client):</p>
<ol>
<li>
<p>Install the necessary packages:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install globus-proxy-utils gsi-openssh-clients
</pre></div>


</li>
<li>
<p>Initialize your proxy. After this, none of the gsi commands should prompt you for your password.</p>
</li>
<li>
<p>Connect to the server:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> gsissh -p <span class="m">2222</span> <span style="color:red">&lt;server hostname&gt;</span>
</pre></div>


</li>
<li>
<p>Copy a test file to the server:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> gsiscp -p <span class="m">2222</span> testfile <span style="color:red">&lt;server hostname&gt;</span>:/tmp
</pre></div>


</li>
<li>
<p>Connect to the server via SFTP and grab files:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> gsisftp -P <span class="m">2222</span> <span style="color:red">&lt;server hostname&gt;</span>
<span class="gp">user@host $</span> <span class="nb">cd</span> /tmp
<span class="gp">user@host $</span> get testfile
</pre></div>


</li>
</ol>
</li>
</ol>
<h2 id="htcondor-ce-collector-wip">HTCondor-CE Collector (WIP)<a class="headerlink" href="#htcondor-ce-collector-wip" title="Permanent link">&para;</a></h2>
<p>The CE Collector is a stripped-down version of HTCondor-CE that contains mostly just the collector daemon and configs. It was introduced in htcondor-ce-1.6. The production CE Collectors run at the GOC, but you may want to set up your own for testing.</p>
<ol>
<li>Make 2 VMs with the EPEL/OSG repos installed: one for the collector, and one for the CE</li>
</ol>
<h3 id="setting-up-the-collector">Setting Up the Collector<a class="headerlink" href="#setting-up-the-collector" title="Permanent link">&para;</a></h3>
<ol>
<li>Install <code>htcondor-ce-collector</code></li>
<li>
<p>Create a file called <code>/etc/condor-ce/config.d/99-local.conf</code> that contains this line:<pre class='file'></p>
<div class="codehilite"><pre><span></span>COLLECTOR.ALLOW_ADVERTISE_SCHEDD = $(COLLECTOR.ALLOW_ADVERTISE_SCHEDD), your_htcondor_ce_host.example.net&lt;/pre&gt;
</pre></div>


<p>(with <code>your_htcondor_ce_host</code> replaced by the hostname the HTCondor-CE VM)</p>
</li>
<li>
<p>Run <code>service condor-ce-collector start</code></p>
</li>
</ol>
<h3 id="setting-up-the-ce">Setting Up the CE<a class="headerlink" href="#setting-up-the-ce" title="Permanent link">&para;</a></h3>
<ol>
<li>Install <code>osg-htcondor-ce-condor</code> (replace condor with the batch system of your choice)</li>
<li>Ensure osg-configure &gt;= 1.0.60-2 is installed</li>
<li>
<p>Configure your CE using osg-configure</p>
<ol>
<li>You should use the <a href="https://www.opensciencegrid.org/docs/compute-element/install-htcondor-ce/">HTCondor-CE Install Docs</a> as a reference, although you can skip several of the steps</li>
<li>You can skip setting up Squid: set <code>enabled</code> to <code>True</code> and <code>location</code> to <code>UNAVAILABLE</code> in <code>01-squid.ini</code></li>
<li>Set <code>htcondor_gateway_enabled</code> to <code>True</code> in <code>10-gateway.ini</code></li>
<li>You probably don't need GUMS, but if you want it, use the Fermi GUMS server (set <code>gums_host</code> to <code>gums.fnal.gov</code> and <code>authorization_method</code> to <code>xacml</code> in 10-misc.ini)</li>
<li>
<p>To keep osg-configure from complaining about storage, edit <code>10-storage.ini</code>:</p>
<ul>
<li>Set <code>se_available</code> to <code>False</code></li>
<li>Set <code>app_dir</code> to <code>/osg/app_dir</code></li>
<li>Set <code>data_dir</code> to <code>/osg/data_dir</code></li>
<li>Do <code>mkdir -p /osg/app_dir/etc; mkdir -p /osg/data_dir; chmod 1777 /osg/app_dir{,/etc}</code></li>
</ul>
</li>
<li>
<p>Enable your batch system by setting <code>enabled</code> to <code>True</code> in <code>20-&lt;batch system&gt;.ini</code></p>
</li>
<li>Set up the site info in <code>40-siteinfo.ini</code> ; in particular, you'll need to set the <code>resource</code> and <code>resource_group</code> settings
    \ (you just need to pick a name; I concatenate my login name with the short host name and use that, e.g. matyasfermicloud001).
    \ You can also use the following settings:<ul>
<li><code>group=OSG-ITB</code></li>
<li><code>sponsor=local</code></li>
<li><code>city=Batavia, IL</code></li>
<li><code>country=US</code></li>
<li><code>longitude=-88</code></li>
<li><code>latitude=41</code></li>
</ul>
</li>
</ol>
</li>
<li>
<p>Edit the file <code>/etc/osg/config.d/30-infoservices.ini</code> and set <code>ce_collectors</code> to the collector host</p>
</li>
<li>Run <code>osg-configure -dc</code></li>
<li>Start up your batch system</li>
<li>Run <code>service condor-ce start</code></li>
</ol>
<p>The CE will report to the collector host every five minutes. If you want to force it to send now, run <code>condor_ce_reconfig</code>. You should see your CE if you run <code>condor_ce_status -schedd</code> on the collector host.</p>
<h2 id="rsv">RSV<a class="headerlink" href="#rsv" title="Permanent link">&para;</a></h2>
<p>Testing a fresh installation:</p>
<ol>
<li>make sure the yum repositories required by OSG is installed on your host<ul>
<li>rpm -Uvh <a href="http://repo.opensciencegrid.org/osg/3.4/osg-3.4-el7-release-latest.rpm">http://repo.opensciencegrid.org/osg/3.4/osg-3.4-el7-release-latest.rpm</a> OR rpm -Uvh <a href="http://repo.opensciencegrid.org/osg/3.4/osg-3.4-el6-release-latest.rpm">http://repo.opensciencegrid.org/osg/3.4/osg-3.4-el6-release-latest.rpm</a></li>
<li>also make sure epel repo is set up. </li>
</ul>
</li>
<li>install the rpm<ul>
<li>yum --enablerepo=osg-testing install rsv </li>
</ul>
</li>
<li>edit /etc/osg/config.d/30-rsv.ini file<ul>
<li>in my case, I don't have a service cert for testing, so I use my own personal cert to create the proxy, but later on the owner of the proxy should be changed to "rsv" user that is created during the rpm install.</li>
<li>in the config file, for the ce_hosts and gridftp_hosts, put in a test server, as the result from this test will be uploaded to OSG GOC, which may mess up your production service monitoring if you chose a production server for the test.</li>
</ul>
</li>
<li>osg-configure -v</li>
<li>osg-configure -c</li>
<li>/etc/init.d/condor-cron start</li>
<li>/etc/init.d/rsv start</li>
<li>rsv-control --list</li>
<li>rsv-control --version</li>
<li>rsv-control --run --all-enabled 11. make sure the results from the above commands look fine.</li>
</ol>
<p>Testing an upgrade installation:</p>
<ol>
<li>make sure to enable the osg-testing repo, and set its priority higher than the other repos</li>
<li>yum --enablerepo=osg-testing upgrade rsv*</li>
<li>you can use the old 30-rsv.ini file for configuration</li>
<li>repeat steps 4)~11) as mentioned in the last section.</li>
</ol>
<h2 id="slurm">Slurm<a class="headerlink" href="#slurm" title="Permanent link">&para;</a></h2>
<p>This section goes through the steps needed to set up a slurm install on a VM. This is a necessary prerequisite for testing Slurm related components (CE integration, gratia, etc.). Note that the slurm setup used for this uses weak passwords for mysql. It should be sufficient for a quick setup, testing, and then tear down but should not be used without changes if it will be running for any appreciable length of time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>need to have a VM with 2+ GB of memory</p>
</div>
<h3 id="installation-and-setup">Installation and setup<a class="headerlink" href="#installation-and-setup" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Download scripts and config files: </p>
<div class="codehilite"><pre><span></span>cd /tmp/
git clone &lt;https://github.com/sthapa/utilities.git&gt;
cd utilities/slurm
</pre></div>


</li>
<li>
<p>setup and install slurm components</p>
<div class="codehilite"><pre><span></span>export username=&#39;USERNAME&#39; \# user that jobs will run as
export version=&#39;14.11.7&#39; \# slurm version to install (e.g. 16.05.2 or 14.11.7)
./slurm-setup.sh
</pre></div>


</li>
<li>
<p>After successful completion, slurm and slurm gratia probes should be setup and enabled.</p>
</li>
</ol>
<h3 id="running-a-job-using-slurm">Running a job using slurm<a class="headerlink" href="#running-a-job-using-slurm" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Generate test.sh with the following:</p>
<div class="codehilite"><pre><span></span>#/bin/bash
echo &quot;In the directory: `pwd`&quot; echo &quot;As the user: `whoami`&quot; echo “Hostname:&quot; /bin/hostname sleep 60 &lt;/pre&gt;
</pre></div>


</li>
<li>
<p>run <code>sbatch test.sh</code></p>
</li>
<li>the output from the jobs should appear in the current working directory as <code>test.sh.[eo].nnnnn</code> where nnnnn is a job id</li>
</ol>
<h2 id="vo-client">VO Client<a class="headerlink" href="#vo-client" title="Permanent link">&para;</a></h2>
<p>This document contains a basic recipe for testing a VO Package release</p>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>Testing the VO package requires a few components:
   * X.509 certificate with membership to at least one VO
   * System with working GUMS installation
   * System with OSG installation (voms-proxy-init and edg-mkgridmap)</p>
<h3 id="testing-voms-proxy-init">Testing <code>voms-proxy-init</code><a class="headerlink" href="#testing-voms-proxy-init" title="Permanent link">&para;</a></h3>
<p>Login in the system that has voms-proxy-init installed.  Make sure that you have the correct 
vo-client rpms installed and that your X.509 certificate is in your home directory.  For each
VO that you have membership in, run the following <code>voms-proxy-init -voms [VO]</code> where <code>[VO]</code> is 
the appropriate VO (e.g. osg, cms, etc.).  You should be able to generate a voms-proxy for that
VO without errors.</p>
<h3 id="testing-edg-mkgridmap">Testing <code>edg-mkgridmap</code><a class="headerlink" href="#testing-edg-mkgridmap" title="Permanent link">&para;</a></h3>
<p>Log on to a system with <code>edg-mkgridmap</code> installed.  Make sure you have the correct vo-client rpms 
installed (vo-client-edgmkgridmap).  Run <code>edg-mkgridmap</code> and check the log output for errors.<br />
There will be some errors so compare your errors with the errors on previous vo-package tickets to
make sure no new errors have appeared.</p>
<h3 id="testing-gums">Testing GUMS<a class="headerlink" href="#testing-gums" title="Permanent link">&para;</a></h3>
<p>Log on to a system with a working GUMS install.  Make sure that you have the correct vo-client 
rpms (osg-gums-config) installed.  </p>
<ol>
<li>Make a backup of <code>/etc/gums/gums.config</code> </li>
<li>Copy the mysql database information from <code>/etc/gums/gums.config</code> to <code>/etc/gums/gums.config.template</code></li>
<li>Copy <code>/etc/gums/gums.config.template</code> to <code>/etc/gums/gums.config</code></li>
<li>Start the <code>tomcat6</code> service </li>
<li>Go to the GUMS interface (e.g. https://my.host:8443/gums)</li>
<li>Go to the Update VO members page and click on the <code>update VO members</code> button</li>
<li>Once completed, there will probably be some errors.</li>
<li>Compare errors to errors on prior vo package update tickets and make sure no new errors have occurred. </li>
</ol>
<h2 id="voms-admin-server">VOMS Admin Server<a class="headerlink" href="#voms-admin-server" title="Permanent link">&para;</a></h2>
<h3 id="install-and-configure-voms-admin-server">Install and configure voms-admin-server<a class="headerlink" href="#install-and-configure-voms-admin-server" title="Permanent link">&para;</a></h3>
<p>Install and configure voms-admin-server with this <a href="../voms-install.sh">voms-install.sh</a> script, entering <code>osg-testing</code> when prompted for the <code>REPO</code> and your own e-mail address when prompted for <code>EMAIL_FROM</code>.</p>
<h3 id="set-up-test_vo-and-add-yourself-as-an-admin">Set up TEST_VO and add yourself as an admin<a class="headerlink" href="#set-up-test_vo-and-add-yourself-as-an-admin" title="Permanent link">&para;</a></h3>
<p>To add a test VO (named TEST_VO) and add yourself as an admin, use the following script, replacing the <code>USER_EMAIL</code>, <code>USER_CERT_SUBJECT</code>, and <code>USER_COMMON_NAME</code> variables with your own:</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">VO_NAME</span><span class="o">=</span><span class="s2">&quot;TEST_VO&quot;</span>
<span class="nv">TOMCAT_PORT</span><span class="o">=</span><span class="s2">&quot;8443&quot;</span>
<span class="nv">USER_EMAIL</span><span class="o">=</span><span class="s2">&quot;YOUR_EMAIL&quot;</span>
<span class="nv">USER_CERT_SUBJECT</span><span class="o">=</span><span class="s2">&quot;YOUR CERT DN&quot;</span>
<span class="nv">USER_CERT_ISSUER</span><span class="o">=</span><span class="s2">&quot;/DC=com/DC=DigiCert-Grid/O=DigiCert Grid/CN=DigiCert Grid CA-1&quot;</span>
<span class="nv">USER_COMMON_NAME</span><span class="o">=</span><span class="s2">&quot;YOUR CERT CN&quot;</span>

voms-admin --vo <span class="nv">$VO_NAME</span> --host <span class="nv">$HOSTNAME</span> --nousercert create-user <span class="se">\</span>
    <span class="s2">&quot;</span><span class="nv">$USER_CERT_SUBJECT</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$USER_CERT_ISSUER</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$USER_COMMON_NAME</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$USER_EMAIL</span><span class="s2">&quot;</span>

voms-admin --vo <span class="nv">$VO_NAME</span> --host <span class="nv">$HOSTNAME</span> --nousercert assign-role <span class="se">\</span>
    /<span class="nv">$VO_NAME</span> VO-Admin <span class="s2">&quot;</span><span class="nv">$USER_CERT_SUBJECT</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$USER_CERT_ISSUER</span><span class="s2">&quot;</span>

<span class="nb">echo</span> web ui: https://<span class="nv">$HOSTNAME</span>:<span class="nv">$TOMCAT_PORT</span>/voms/<span class="nv">$VO_NAME</span>
</pre></div>


<h3 id="testing-the-web-ui">Testing the web UI<a class="headerlink" href="#testing-the-web-ui" title="Permanent link">&para;</a></h3>
<ol>
<li>Add/suspend/restore/delete a user (using your e-mail address for contact)</li>
<li>Verify e-mail receipt of suspension message</li>
</ol>
<h2 id="xrootd-voms-testing">XRootD VOMS Testing<a class="headerlink" href="#xrootd-voms-testing" title="Permanent link">&para;</a></h2>
<p>This section is intended for OSG Software/Release teams to gather information on testing vomsxrd/xrootd-voms-plugin package. Original plugin named <a href="http://gganis.github.io/vomsxrd/">vomsxrd</a>, similar to lcmaps that extracts information for authorization within xrootd of a proxy's voms extension.</p>
<p>You need an <a href="https://www.opensciencegrid.org/docs/data/install-xrootd/">xrootd server installation</a></p>
<p>In the xrootd server yum install the following packages:</p>
<ul>
<li>xrootd</li>
<li>xrootd-voms-plugin</li>
<li>vo-client</li>
</ul>
<p>In the xrootd client yum install the following packages:</p>
<ul>
<li>xrootd-client</li>
<li>voms-clients</li>
<li>vo-client</li>
</ul>
<p>In the xrootd server add this lines to file <code>/etc/xrootd/xrootd-clustered.cfg</code></p>
<div class="codehilite"><pre><span></span>xrootd.seclib /usr/lib64/libXrdSec.so
sec.protparm gsi -vomsfun:/usr/lib64/libXrdSecgsiVOMS.so -vomsfunparms:certfmt=raw|vos=cms|dbg -vomsat:2
sec.protocol /usr/lib64 gsi -ca:1 -crl:3
</pre></div>


<p>This configuration will only authorize members of VO <strong>cms</strong>. You can change it to another VO.</p>
<p>Make sure <code>fetch-crl</code> has been run otherwise the xrootd service may fail to start.</p>
<p>In the xrootd client get a proxy without voms extension or with another VO extension different that the one used in the configuration:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> voms-proxy-init -voms mis
<span class="go">Enter GRID pass phrase:</span>
<span class="go">Your identity: /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</span>
<span class="go">Creating temporary proxy ........................... Done</span>
<span class="go">Contacting  voms.opensciencegrid.org:15001 [/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=http/voms.opensciencegrid.org] &quot;mis&quot; Done</span>
<span class="go">Creating proxy ............................................... Done</span>
<span class="gp">user@host $</span> xrdcp vomsxrdtest root://fermicloud024.fnal.gov:1094//tmp/
<span class="go">[0B/0B][100%][==================================================][0B/s]  </span>
<span class="go">Run: [FATAL] Auth failed</span>
</pre></div>


<p>Now get a proxy with cms extension and run it again:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> voms-proxy-init -voms cms
<span class="go">Enter GRID pass phrase:</span>
<span class="go">Your identity: /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</span>
<span class="go">Creating temporary proxy ...................................... Done</span>
<span class="go">Contacting  voms2.cern.ch:15002 [/DC=ch/DC=cern/OU=computers/CN=voms2.cern.ch] &quot;cms&quot; Done</span>
<span class="go">Creating proxy .......................................... Done</span>
<span class="go">Your proxy is valid until Thu Dec  4 22:53:29 2014</span>
<span class="gp">user@host $</span> xrdcp vomsxrdtest root://fermicloud024.fnal.gov:1094//tmp/
<span class="go">[0B/0B][100%][==================================================][0B/s] </span>
</pre></div>


<h2 id="xrootd-plugins">XRootD Plugins<a class="headerlink" href="#xrootd-plugins" title="Permanent link">&para;</a></h2>
<h3 id="hadoop-name-node-installation">Hadoop name node installation<a class="headerlink" href="#hadoop-name-node-installation" title="Permanent link">&para;</a></h3>
<p>Use the following script with option 1:</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">set</span> -e

<span class="k">select</span> NODETYPE in namenode datanode gridftp<span class="p">;</span> <span class="k">do</span>
  <span class="o">[[</span> <span class="nv">$NODETYPE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">break</span>
<span class="k">done</span>
<span class="k">case</span> <span class="nv">$NODETYPE</span> in
  namenode <span class="o">)</span> <span class="nv">NAMENODE</span><span class="o">=</span><span class="nv">$HOSTNAME</span> <span class="p">;;</span>
         * <span class="o">)</span> <span class="nb">read</span> -p <span class="s1">&#39;hostname for NAMENODE? &#39;</span> NAMENODE <span class="p">;;</span>
<span class="k">esac</span>
<span class="nb">echo</span> <span class="nv">NODETYPE</span><span class="o">=</span><span class="nv">$NODETYPE</span>
<span class="nb">echo</span> <span class="nv">NAMENODE</span><span class="o">=</span><span class="nv">$NAMENODE</span>
<span class="nb">read</span> -p <span class="s1">&#39;ok? [y/N] &#39;</span> ok
<span class="k">case</span> <span class="nv">$ok</span> in
  y*<span class="p">|</span>Y*<span class="o">)</span> <span class="p">;;</span>  <span class="c1"># ok</span>
      *<span class="o">)</span> <span class="nb">exit</span> <span class="p">;;</span>
<span class="k">esac</span>
<span class="c1">#yum install --enablerepo=osg-minefield osg-se-hadoop-$NODETYPE</span>
yum install osg-se-hadoop-<span class="nv">$NODETYPE</span>
<span class="k">case</span> <span class="nv">$NODETYPE</span> in
  namenode<span class="p">|</span>datanode <span class="o">)</span>
    mkdir -p /data/<span class="o">{</span>hadoop,scratch,checkpoint<span class="o">}</span>
    chown -R hdfs:hdfs /data
    sed -i s/NAMENODE/<span class="nv">$NAMENODE</span>/ /etc/hadoop/conf.osg/<span class="o">{</span>core,hdfs<span class="o">}</span>-site.xml
    cp /etc/hadoop/conf.osg/<span class="o">{</span>core,hdfs<span class="o">}</span>-site.xml /etc/hadoop/conf/
    touch /etc/hosts_exclude
    <span class="p">;;</span>
  gridftp <span class="o">)</span>
    ln -snf conf.osg /etc/hadoop/conf
    sed -i s/NAMENODE/<span class="nv">$NAMENODE</span>/ /etc/hadoop/conf.osg/<span class="o">{</span>core,hdfs<span class="o">}</span>-site.xml
    <span class="nb">echo</span> <span class="s2">&quot;hadoop-fuse-dfs# /mnt/hadoop fuse server=</span><span class="nv">$NAMENODE</span><span class="s2">,port=9000,rdbuffer=131072,allow_other 0 0&quot;</span> &gt;&gt; /etc/fstab
    mkdir /mnt/hadoop
    mount /mnt/hadoop
    cp -v /etc/redhat-release /mnt/hadoop/test-file
    sed -i <span class="s1">&#39;/globus_mapping/s/^# *//&#39;</span> /etc/grid-security/gsi-authz.conf
    sed -i s/yourgums.yourdomain/gums.fnal.gov/ /etc/lcmaps.db
    mkdir /mnt/hadoop/fnalgrid
    useradd fnalgrid -g fnalgrid
    chown fnalgrid:fnalgrid /mnt/hadoop/fnalgrid
    service globus-gridftp-server start
    <span class="k">if</span> <span class="nb">type</span> -t globus-url-copy &gt;/dev/null<span class="p">;</span> <span class="k">then</span>
      globus-url-copy file:////bin/bash  gsiftp://<span class="nv">$HOSTNAME</span>/mnt/hadoop/fnalgrid/first_test
    <span class="k">else</span>
      <span class="nb">echo</span> globus-url-copy not installed
    <span class="k">fi</span>
    <span class="p">;;</span>
<span class="k">esac</span>
<span class="k">case</span> <span class="nv">$NODETYPE</span> in
  namenode <span class="o">)</span> su - hdfs -c <span class="s2">&quot;hadoop namenode -format&quot;</span> <span class="p">;;</span>
<span class="k">esac</span>
service hadoop-hdfs-<span class="nv">$NODETYPE</span> start
</pre></div>


<h3 id="hadoop-data-node-installation">Hadoop data node installation<a class="headerlink" href="#hadoop-data-node-installation" title="Permanent link">&para;</a></h3>
<ol>
<li>Run same script as before but with option number 2.</li>
<li>
<p>Install xrootd-server:</p>
<div class="codehilite"><pre><span></span>yum install xrootd-server
</pre></div>


</li>
<li>
<p>Install xrootd-plugins</p>
<div class="codehilite"><pre><span></span>yum install xrootd-cmstfc xrootd-hdfs
</pre></div>


</li>
</ol>
<h3 id="gridftp-installation">GridFTP installation<a class="headerlink" href="#gridftp-installation" title="Permanent link">&para;</a></h3>
<p>Run same as script but with option number.</p>
<h3 id="on-the-name-node">On the name node<a class="headerlink" href="#on-the-name-node" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="gp">[root@fermicloud092 ~]#</span> hdfs dfs -ls /test-file
<span class="go">Found 1 items</span>
<span class="go">-rw-r--r--   2 root root          0 2014-07-21 15:57 /test-file</span>
</pre></div>


<p>This means your hadoop is working.</p>
<p>Modify the file <code>/etc/xrootd/xrootd-clustered.cfg</code> to look like this:</p>
<div class="codehilite"><pre><span></span>xrd.port 1094

# The roles this server will play.                                                                                            
all.role server
all.role manager if xrootd.unl.edu
# The known managers                                                                                                          
all.manager srm.unl.edu:1213
#all.manager xrootd.ultralight.org:1213                                                                                       

# Allow any path to be exported; this is further refined in the authfile.                                                     
all.export / nostage

# Hosts allowed to use this xrootd cluster                                                                                    
cms.allow host *

### Standard directives                                                                                                       
# Simple sites probably don&#39;t need to touch these.                                                                            
# Logging verbosity                                                                                                           
xrootd.trace all -debug
ofs.trace all -debug
xrd.trace all -debug
cms.trace all -debug

# Integrate with CMS TFC, placed in /etc/storage.xml                                                                          
oss.namelib /usr/lib64/libXrdCmsTfc.so file:/etc/xrootd/storage.xml?protocol=hadoop

xrootd.seclib /usr/lib64/libXrdSec.so
xrootd.fslib /usr/lib64/libXrdOfs.so
ofs.osslib /usr/lib64/libXrdHdfs.so
all.adminpath /var/run/xrootd
all.pidpath /var/run/xrootd

cms.delay startup 10
cms.fxhold 60s
cms.perf int 30s pgm /usr/bin/XrdOlbMonPerf 30

oss.space default_stage /opt/xrootd_cache
</pre></div>


<p>Create file <code>/etc/xrootd/storage.xml</code> and place this:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;storage-mapping&gt;</span>
<span class="nt">&lt;lfn-to-pfn</span> <span class="na">protocol=</span><span class="s">&quot;hadoop&quot;</span> <span class="na">destination-match=</span><span class="s">&quot;.*&quot;</span> <span class="na">path-match=</span><span class="s">&quot;.*/+tmp2/test-file&quot;</span> <span class="na">result=</span><span class="s">&quot;/test-file&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/storage-mapping&gt;</span>
</pre></div>


<p>For el7 the instrucctions are a little bit different. See:</p>
<p><a href="https://jira.opensciencegrid.org/browse/SOFTWARE-2198?focusedCommentId=334667&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-334667">https://jira.opensciencegrid.org/browse/SOFTWARE-2198?focusedCommentId=334667&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-334667</a></p>
<p>Now from a node do:</p>
<div class="codehilite"><pre><span></span><span class="go">xrdcp --debug 3 root://yourdatanode.yourdomain:1094//tmp2/test-file .</span>
</pre></div>


<p>If it is sucessful it would have tested both cmstfc and hdfs plugins </p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../empty-pkgs/" title="Empty Packages" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Empty Packages
              </span>
            </div>
          </a>
        
        
          <a href="../../policy/service-migrations-spring-2018/" title="Service Migrations - Spring 2018" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Service Migrations - Spring 2018
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>