



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
  <meta name="robots" content="noindex, nofollow" />

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://opensciencegrid.github.io/technology-itb/release/cut-sw-release/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.4">
    
    
      
        <title>How to Cut a Release - OSG Technology Area (ITB)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/itb.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#how-to-cut-a-software-release" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://opensciencegrid.github.io/technology-itb/" title="OSG Technology Area (ITB)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                OSG Technology Area (ITB)
              </span>
              <span class="md-header-nav__topic">
                How to Cut a Release
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/opensciencegrid/technology-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://opensciencegrid.github.io/technology-itb/" title="OSG Technology Area (ITB)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    OSG Technology Area (ITB)
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/opensciencegrid/technology-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Software
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Software
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Packaging
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Packaging
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/rpm-development-guide/" title="RPM Development Guide" class="md-nav__link">
      RPM Development Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/osg-build-tools/" title="OSG Build Tools" class="md-nav__link">
      OSG Build Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/quilt/" title="Using Quilt" class="md-nav__link">
      Using Quilt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/upcoming-to-main/" title="Upcoming to Main" class="md-nav__link">
      Upcoming to Main
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/koji-workflow/" title="Koji Workflow" class="md-nav__link">
      Koji Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/create-vo-client/" title="Creating the VO Client Package" class="md-nav__link">
      Creating the VO Client Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/repository-management/" title="Repository Management" class="md-nav__link">
      Repository Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/globus-mass-update-procedure/" title="Globus Mass Update Procedure" class="md-nav__link">
      Globus Mass Update Procedure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/resurrecting-epel-packages/" title="Resurrecting Epel Packages" class="md-nav__link">
      Resurrecting Epel Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/koji-mass-rebuilds/" title="Koji Mass Rebuilds" class="md-nav__link">
      Koji Mass Rebuilds
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/development-process/" title="Development Process" class="md-nav__link">
      Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/git-software-development/" title="Git Software Development Process" class="md-nav__link">
      Git Software Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/ce-test-scaling/" title="CE Scale Testing" class="md-nav__link">
      CE Scale Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/ipv6-testing/" title="IPv6 Testing" class="md-nav__link">
      IPv6 Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/software-support/" title="Software Support" class="md-nav__link">
      Software Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/effort-tracking/" title="Effort Tracking" class="md-nav__link">
      Effort Tracking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/release-planning/" title="Release Planning" class="md-nav__link">
      Release Planning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/new-team-member/" title="New Team Member" class="md-nav__link">
      New Team Member
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Release
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Release
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        How to Cut a Release
      </label>
    
    <a href="./" title="How to Cut a Release" class="md-nav__link md-nav__link--active">
      How to Cut a Release
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pick-the-version-number" title="Pick the Version Number" class="md-nav__link">
    Pick the Version Number
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day-0-generate-preliminary-release-list" title="Day 0: Generate Preliminary Release List" class="md-nav__link">
    Day 0: Generate Preliminary Release List
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-update-the-osg-version-rpm" title="Step 1: Update the osg-version RPM" class="md-nav__link">
    Step 1: Update the osg-version RPM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-promote-osg-version-and-generate-the-release-list" title="Step 2: Promote osg-version and generate the release list" class="md-nav__link">
    Step 2: Promote osg-version and generate the release list
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day-1-verify-pre-release-and-generate-tarballs" title="Day 1: Verify Pre-Release and Generate Tarballs" class="md-nav__link">
    Day 1: Verify Pre-Release and Generate Tarballs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-verify-pre-release" title="Step 1: Verify Pre-Release" class="md-nav__link">
    Step 1: Verify Pre-Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-test-pre-release-in-vm-universe" title="Step 2: Test Pre-Release in VM Universe" class="md-nav__link">
    Step 2: Test Pre-Release in VM Universe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-test-pre-release-on-the-madison-itb-site" title="Step 3: Test Pre-Release on the Madison ITB site" class="md-nav__link">
    Step 3: Test Pre-Release on the Madison ITB site
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-regenerate-the-build-repositories" title="Step 4: Regenerate the build repositories" class="md-nav__link">
    Step 4: Regenerate the build repositories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-create-the-client-tarballs" title="Step 5: Create the client tarballs" class="md-nav__link">
    Step 5: Create the client tarballs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-briefly-test-the-client-tarballs" title="Step 6: Briefly test the client tarballs" class="md-nav__link">
    Step 6: Briefly test the client tarballs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-update-the-uw-afs-installation-of-the-tarball-client" title="Step 7: Update the UW AFS installation of the tarball client" class="md-nav__link">
    Step 7: Update the UW AFS installation of the tarball client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-wait" title="Step 8: Wait" class="md-nav__link">
    Step 8: Wait
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day-2-pushing-the-release" title="Day 2: Pushing the Release" class="md-nav__link">
    Day 2: Pushing the Release
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-push-from-pre-release-to-release" title="Step 1: Push from pre-release to release" class="md-nav__link">
    Step 1: Push from pre-release to release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-upload-the-client-tarballs" title="Step 2: Upload the client tarballs" class="md-nav__link">
    Step 2: Upload the client tarballs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-install-the-tarballs-into-oasis" title="Step 3: Install the tarballs into OASIS" class="md-nav__link">
    Step 3: Install the tarballs into OASIS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-remove-old-uw-afs-installations-of-the-tarball-client" title="Step 4: Remove old UW AFS installations of the tarball client" class="md-nav__link">
    Step 4: Remove old UW AFS installations of the tarball client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-update-the-docker-wn-client" title="Step 5: Update the Docker WN client" class="md-nav__link">
    Step 5: Update the Docker WN client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-announce-the-release" title="Step 6: Announce the release" class="md-nav__link">
    Step 6: Announce the release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day-3-update-the-itb" title="Day 3: Update the ITB" class="md-nav__link">
    Day 3: Update the ITB
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cut-data-release/" title="How to Cut a Data Release" class="md-nav__link">
      How to Cut a Data Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../release-policy/" title="Release Policy" class="md-nav__link">
      Release Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../new-release-series/" title="New Release Series" class="md-nav__link">
      New Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../old-release-removal/" title="Old Release Series Removal" class="md-nav__link">
      Old Release Series Removal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../itb-testing/" title="ITB Prerelease Testing" class="md-nav__link">
      ITB Prerelease Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../empty-pkgs/" title="Empty Packages" class="md-nav__link">
      Empty Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../acceptance-testing/" title="Acceptance Testing" class="md-nav__link">
      Acceptance Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Policy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Policy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/service-migrations-spring-2018/" title="Service Migrations - Spring 2018" class="md-nav__link">
      Service Migrations - Spring 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/gums-retire/" title="GUMS Retirement" class="md-nav__link">
      GUMS Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/bestman2-retire/" title="BeStMan2 Retirement" class="md-nav__link">
      BeStMan2 Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/voms-admin-retire/" title="VOMS Admin Retirement" class="md-nav__link">
      VOMS Admin Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/release-series/" title="Release Series Support" class="md-nav__link">
      Release Series Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/globus-toolkit/" title="Globus Toolkit Support" class="md-nav__link">
      Globus Toolkit Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/external-oasis-repos/" title="OASIS Repository Mirroring" class="md-nav__link">
      OASIS Repository Mirroring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/flexible-release-model/" title="Flexible Release Model" class="md-nav__link">
      Flexible Release Model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Infrastructure
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Infrastructure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-restore-recipe/" title="Koji Restore Recipe" class="md-nav__link">
      Koji Restore Recipe
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-hub-setup/" title="Koji-Hub Setup" class="md-nav__link">
      Koji-Hub Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-inf-overview/" title="Koji Infrastructure Overview" class="md-nav__link">
      Koji Infrastructure Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-policy-writing/" title="Koji Policy Writing" class="md-nav__link">
      Koji Policy Writing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-user-management/" title="Koji User Management" class="md-nav__link">
      Koji User Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/madison-itb/" title="Madison ITB" class="md-nav__link">
      Madison ITB
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/writing-documentation/" title="Writing Documentation" class="md-nav__link">
      Writing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/reviewing-documentation/" title="Reviewing Documentation" class="md-nav__link">
      Reviewing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/style-guide/" title="Markdown Style Guide" class="md-nav__link">
      Markdown Style Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/new-doc-area/" title="Creating a New Area" class="md-nav__link">
      Creating a New Area
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/markdown-migration/" title="Migrating Documents to Markdown" class="md-nav__link">
      Migrating Documents to Markdown
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Historical Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Historical Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/koji-initial-install/" title="Koji Initial Install" class="md-nav__link">
      Koji Initial Install
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Historical Transitions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Historical Transitions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/sha2-support/" title="SHA-2 Support" class="md-nav__link">
      SHA-2 Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Meetings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Meetings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180730/" title="July 30, 2018" class="md-nav__link">
      July 30, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180723/" title="July 23, 2018" class="md-nav__link">
      July 23, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180716/" title="July 16, 2018" class="md-nav__link">
      July 16, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180702/" title="July 2, 2018" class="md-nav__link">
      July 2, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180625/" title="June 25, 2018" class="md-nav__link">
      June 25, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180618/" title="June 18, 2018" class="md-nav__link">
      June 18, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180611/" title="June 11, 2018" class="md-nav__link">
      June 11, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180604/" title="June 4, 2018" class="md-nav__link">
      June 4, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180529/" title="May 29, 2018" class="md-nav__link">
      May 29, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180514/" title="May 14, 2018" class="md-nav__link">
      May 14, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180507/" title="May 7, 2018" class="md-nav__link">
      May 7, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180430/" title="April 30, 2018" class="md-nav__link">
      April 30, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180423/" title="April 23, 2018" class="md-nav__link">
      April 23, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180416/" title="April 16, 2018" class="md-nav__link">
      April 16, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180409/" title="April 9, 2018" class="md-nav__link">
      April 9, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180402/" title="April 2, 2018" class="md-nav__link">
      April 2, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180312/" title="March 12, 2018" class="md-nav__link">
      March 12, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180305/" title="March 5, 2018" class="md-nav__link">
      March 5, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180226/" title="February 26, 2018" class="md-nav__link">
      February 26, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180219/" title="February 19, 2018" class="md-nav__link">
      February 19, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180212/" title="February 12, 2018" class="md-nav__link">
      February 12, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180205/" title="February 5, 2018" class="md-nav__link">
      February 5, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180129/" title="January 29, 2018" class="md-nav__link">
      January 29, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180122/" title="January 22, 2018" class="md-nav__link">
      January 22, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180108/" title="January 8, 2018" class="md-nav__link">
      January 8, 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2018/TechArea20180102/" title="January 2, 2018" class="md-nav__link">
      January 2, 2018
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pick-the-version-number" title="Pick the Version Number" class="md-nav__link">
    Pick the Version Number
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day-0-generate-preliminary-release-list" title="Day 0: Generate Preliminary Release List" class="md-nav__link">
    Day 0: Generate Preliminary Release List
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-update-the-osg-version-rpm" title="Step 1: Update the osg-version RPM" class="md-nav__link">
    Step 1: Update the osg-version RPM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-promote-osg-version-and-generate-the-release-list" title="Step 2: Promote osg-version and generate the release list" class="md-nav__link">
    Step 2: Promote osg-version and generate the release list
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day-1-verify-pre-release-and-generate-tarballs" title="Day 1: Verify Pre-Release and Generate Tarballs" class="md-nav__link">
    Day 1: Verify Pre-Release and Generate Tarballs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-verify-pre-release" title="Step 1: Verify Pre-Release" class="md-nav__link">
    Step 1: Verify Pre-Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-test-pre-release-in-vm-universe" title="Step 2: Test Pre-Release in VM Universe" class="md-nav__link">
    Step 2: Test Pre-Release in VM Universe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-test-pre-release-on-the-madison-itb-site" title="Step 3: Test Pre-Release on the Madison ITB site" class="md-nav__link">
    Step 3: Test Pre-Release on the Madison ITB site
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-regenerate-the-build-repositories" title="Step 4: Regenerate the build repositories" class="md-nav__link">
    Step 4: Regenerate the build repositories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-create-the-client-tarballs" title="Step 5: Create the client tarballs" class="md-nav__link">
    Step 5: Create the client tarballs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-briefly-test-the-client-tarballs" title="Step 6: Briefly test the client tarballs" class="md-nav__link">
    Step 6: Briefly test the client tarballs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-update-the-uw-afs-installation-of-the-tarball-client" title="Step 7: Update the UW AFS installation of the tarball client" class="md-nav__link">
    Step 7: Update the UW AFS installation of the tarball client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-wait" title="Step 8: Wait" class="md-nav__link">
    Step 8: Wait
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day-2-pushing-the-release" title="Day 2: Pushing the Release" class="md-nav__link">
    Day 2: Pushing the Release
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-push-from-pre-release-to-release" title="Step 1: Push from pre-release to release" class="md-nav__link">
    Step 1: Push from pre-release to release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-upload-the-client-tarballs" title="Step 2: Upload the client tarballs" class="md-nav__link">
    Step 2: Upload the client tarballs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-install-the-tarballs-into-oasis" title="Step 3: Install the tarballs into OASIS" class="md-nav__link">
    Step 3: Install the tarballs into OASIS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-remove-old-uw-afs-installations-of-the-tarball-client" title="Step 4: Remove old UW AFS installations of the tarball client" class="md-nav__link">
    Step 4: Remove old UW AFS installations of the tarball client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-update-the-docker-wn-client" title="Step 5: Update the Docker WN client" class="md-nav__link">
    Step 5: Update the Docker WN client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-announce-the-release" title="Step 6: Announce the release" class="md-nav__link">
    Step 6: Announce the release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day-3-update-the-itb" title="Day 3: Update the ITB" class="md-nav__link">
    Day 3: Update the ITB
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/technology-itb/edit/master/docs/release/cut-sw-release.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are performing a data release, please follow the instructions <a href="../../release/cut-data-release/">here</a></p>
</div>
<h1 id="how-to-cut-a-software-release">How to Cut a Software Release<a class="headerlink" href="#how-to-cut-a-software-release" title="Permanent link">&para;</a></h1>
<p>This document details the process for releasing new OSG Release version(s). This document does NOT discuss the policy for deciding what goes into a release, which can be found <a href="../../release/release-policy/">here</a>.</p>
<p>Due to the length of time that this process takes, it is recommended to do the release over three or more days to allow for errors to be corrected and tests to be run.</p>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<ul>
<li>User certificate registered with OSG's koji with build and release team privileges</li>
<li>An account on UW CS machines (e.g. <code>library</code>, <code>ingwe</code>) to access UW's AFS</li>
<li><code>release-tools</code> scripts in your <code>PATH</code> (<a href="https://github.com/opensciencegrid/release-tools">GitHub</a>)</li>
<li><code>osg-build</code> scripts in your <code>PATH</code> (installed via OSG yum repos or <a href="https://github.com/opensciencegrid/osg-build">source</a>)</li>
<li>Access to the tarball repository at UNL (osgcollab@hcc-osg-software.unl.edu)</li>
</ul>
<h2 id="pick-the-version-number">Pick the Version Number<a class="headerlink" href="#pick-the-version-number" title="Permanent link">&para;</a></h2>
<p>The rest of this document makes references to <code>&lt;VERSION(S)&gt;</code> and <code>&lt;NON-UPCOMING VERSIONS(S)&gt;</code>, which refer to a space-delimited list of OSG version(s) and that same list minus <code>upcoming</code> (e.g. <code>3.3.28 3.4.3 upcoming</code> and <code>3.3.28 3.4.3</code>). If you are unsure about either the version or revision, please consult the release manager.</p>
<h2 id="day-0-generate-preliminary-release-list">Day 0: Generate Preliminary Release List<a class="headerlink" href="#day-0-generate-preliminary-release-list" title="Permanent link">&para;</a></h2>
<p>The release manager often needs a tentative list of packages to be released. This is done by finding the package differences between osg-testing and the current release.</p>
<h3 id="step-1-update-the-osg-version-rpm">Step 1: Update the osg-version RPM<a class="headerlink" href="#step-1-update-the-osg-version-rpm" title="Permanent link">&para;</a></h3>
<p>For each release (excluding upcoming), update the version number in the osg-version RPM's spec file and build it in koji:</p>
<div class="codehilite"><pre><span></span><span class="c1"># If building for the latest release out of trunk</span>
osg-build koji osg-version
<span class="c1"># If building for an older release out of a branch:</span>
<span class="nv">MAJOR_VERSION</span><span class="o">=</span>&lt;MAJOR VERSION&gt;
osg-build koji --repo<span class="o">=</span><span class="nv">$MAJOR_VERSION</span> osg-version
</pre></div>


<p>Where <code>&lt;MAJOR VERSION&gt;</code> is of the format <code>x.y</code> (e.g. <code>3.2</code>).</p>
<h3 id="step-2-promote-osg-version-and-generate-the-release-list">Step 2: Promote osg-version and generate the release list<a class="headerlink" href="#step-2-promote-osg-version-and-generate-the-release-list" title="Permanent link">&para;</a></h3>
<p>Run <code>0-generate-pkg-list</code> from a machine that has your koji-registered user certificate:</p>
<div class="codehilite"><pre><span></span><span class="nv">VERSIONS</span><span class="o">=</span><span class="s2">&quot;&lt;VERSION(S)&gt;&quot;</span>
</pre></div>


<div class="codehilite"><pre><span></span>git clone https://github.com/opensciencegrid/release-tools.git
<span class="nb">cd</span> release-tools
<span class="m">0</span>-generate-pkg-list <span class="nv">$VERSIONS</span>
</pre></div>


<h2 id="day-1-verify-pre-release-and-generate-tarballs">Day 1: Verify Pre-Release and Generate Tarballs<a class="headerlink" href="#day-1-verify-pre-release-and-generate-tarballs" title="Permanent link">&para;</a></h2>
<p>This section is to be performed 1-2 days before the release (as designated by the release manager) to perform last checks of the release and create the client tarballs.</p>
<h3 id="step-1-verify-pre-release">Step 1: Verify Pre-Release<a class="headerlink" href="#step-1-verify-pre-release" title="Permanent link">&para;</a></h3>
<p>Compare the list of packages already in pre-release to the final list for the release put together by the OSG Release Coordinator (who should have updated <code>release-list</code> in git). To do this, run the <code>1-verify-prerelease</code> script from git:</p>
<div class="codehilite"><pre><span></span><span class="nv">VERSIONS</span><span class="o">=</span><span class="s2">&quot;&lt;VERSION(S)&gt;&quot;</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="m">1</span>-verify-prerelease <span class="nv">$VERSIONS</span>
</pre></div>


<p>If there are any discrepancies consult the release manager. You may have to tag or untag packages with the <code>osg-koji</code> tool.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please verify that the <code>osg-version</code> RPM is in your set of packages for the release! Also verify that if there is a new version of the <code>osg-tested-internal</code> RPM, then it is included in the release as well!</p>
</div>
<h3 id="step-2-test-pre-release-in-vm-universe">Step 2: Test Pre-Release in VM Universe<a class="headerlink" href="#step-2-test-pre-release-in-vm-universe" title="Permanent link">&para;</a></h3>
<p>To test pre-release, you will be kicking off a manual VM universe test run from <code>osghost.chtc.wisc.edu</code>.</p>
<ol>
<li>Ensure that you meet the <a href="https://github.com/opensciencegrid/vm-test-runs">pre-requisites</a> for submitting VM universe test runs</li>
<li>
<p>Prepare the test suite by running:</p>
<div class="codehilite"><pre><span></span>osg-run-tests -P &#39;Testing OSG pre-release&#39;
</pre></div>


</li>
<li>
<p><code>cd</code> into the directory specified in the output of the previous command</p>
</li>
<li>Submit the DAG:<div class="codehilite"><pre><span></span>condor_submit_dag master-run.dag
</pre></div>


</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there are failures, consult the release-manager before proceeding.</p>
</div>
<h3 id="step-3-test-pre-release-on-the-madison-itb-site">Step 3: Test Pre-Release on the Madison ITB site<a class="headerlink" href="#step-3-test-pre-release-on-the-madison-itb-site" title="Permanent link">&para;</a></h3>
<p>Test the pre-release on the Madison ITB by following the <a href="../../release/itb-testing/">ITB pre-release testing instructions</a>.
If you not local to Madison, consult the release manager for the designated person to do this testing.</p>
<h3 id="step-4-regenerate-the-build-repositories">Step 4: Regenerate the build repositories<a class="headerlink" href="#step-4-regenerate-the-build-repositories" title="Permanent link">&para;</a></h3>
<p>To avoid 404 errors when retrieving packages, it's necessary to regenerate the build repositories. Run the following script from a machine with your koji-registered user certificate:</p>
<div class="codehilite"><pre><span></span><span class="nv">NON_UPCOMING_VERSIONS</span><span class="o">=</span><span class="s2">&quot;&lt;NON-UPCOMING VERSION(S)&gt;&quot;</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="m">1</span>-regen-repos <span class="nv">$NON_UPCOMING_VERSIONS</span>
</pre></div>


<h3 id="step-5-create-the-client-tarballs">Step 5: Create the client tarballs<a class="headerlink" href="#step-5-create-the-client-tarballs" title="Permanent link">&para;</a></h3>
<p>Create the client tarballs as root on an EL7 fermicloud machine using the relevant script from git:</p>
<div class="codehilite"><pre><span></span><span class="nv">NON_UPCOMING_VERSIONS</span><span class="o">=</span><span class="s2">&quot;&lt;NON-UPCOMING VERSION(S)&gt;&quot;</span>
</pre></div>


<div class="codehilite"><pre><span></span>git clone https://github.com/opensciencegrid/release-tools.git
<span class="nb">cd</span> release-tools
./1-client-tarballs <span class="nv">$NON_UPCOMING_VERSIONS</span>
</pre></div>


<h3 id="step-6-briefly-test-the-client-tarballs">Step 6: Briefly test the client tarballs<a class="headerlink" href="#step-6-briefly-test-the-client-tarballs" title="Permanent link">&para;</a></h3>
<p>As an <strong>unprivileged user</strong>, extract each tarball into a separate directory. Make sure osg-post-install works. Make sure <code>osgrun osg-version</code> works by running the following tests, replacing <code>&lt;NON-UPCOMING VERSION(S)</code> with the appropriate version numbers:</p>
<div class="codehilite"><pre><span></span><span class="nv">NON_UPCOMING_VERSIONS</span><span class="o">=</span><span class="s2">&quot;&lt;NON-UPCOMING VERSION(S)&gt;&quot;</span>
</pre></div>


<div class="codehilite"><pre><span></span>dotest <span class="o">()</span> <span class="o">{</span>
    <span class="nv">file</span><span class="o">=</span><span class="nv">$dir</span>/<span class="nv">$client</span>-<span class="nv">$ver</span>-1.<span class="nv">$rhel</span>.<span class="nv">$arch</span>.tar.gz
    <span class="k">if</span> <span class="o">[</span> -e <span class="nv">$file</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nb">echo</span> <span class="s2">&quot;Testing </span><span class="nv">$client</span><span class="s2">-</span><span class="nv">$ver</span><span class="s2">-1.</span><span class="nv">$rhel</span><span class="s2">.</span><span class="nv">$arch</span><span class="s2">...&quot;</span>
        <span class="nv">size</span><span class="o">=</span><span class="k">$(</span>du -m <span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span> <span class="p">|</span> cut -f <span class="m">1</span><span class="k">)</span>
        <span class="k">if</span> <span class="o">[</span> <span class="nv">$size</span> -gt <span class="nv">$max_size</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
            <span class="nb">echo</span> -e <span class="s2">&quot;\e[1;33mWARNING: </span><span class="nv">$client</span><span class="s2">-</span><span class="nv">$ver</span><span class="s2">-1.</span><span class="nv">$rhel</span><span class="s2">.</span><span class="nv">$arch</span><span class="s2"> is too big. Check with release manager.\e[0m&quot;</span>
        <span class="k">fi</span>
        mkdir -p <span class="nv">$rhel</span>-<span class="nv">$arch</span>
        <span class="nb">pushd</span> <span class="nv">$rhel</span>-<span class="nv">$arch</span>
        tar xzf ../<span class="nv">$file</span>
        <span class="nv">$client</span>/osg/osg-post-install
        <span class="nv">$client</span>/osgrun osg-ca-manage setupCA --url osg
        <span class="nv">$client</span>/osgrun osg-update-vos
        <span class="nb">popd</span>
        rm -rf <span class="nv">$rhel</span>-<span class="nv">$arch</span>
    <span class="k">else</span>
        <span class="nb">echo</span> -e <span class="s2">&quot;\e[1;31mERROR: </span><span class="nv">$client</span><span class="s2">-</span><span class="nv">$ver</span><span class="s2">-1.</span><span class="nv">$rhel</span><span class="s2">.</span><span class="nv">$arch</span><span class="s2"> tarball is missing.\e[0m&quot;</span>
    <span class="k">fi</span>
<span class="o">}</span>

<span class="nb">pushd</span> /tmp

<span class="k">for</span> ver in <span class="nv">$NON_UPCOMING_VERSIONS</span><span class="p">;</span> <span class="k">do</span>
    <span class="nv">major_version</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ver</span><span class="p">%.*</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="nv">clients</span><span class="o">=</span><span class="s2">&quot;osg-wn-client&quot;</span>
    <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$major_version</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;3.4&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">clients</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$clients</span><span class="s2"> osg-afs-client&quot;</span>
    <span class="k">fi</span>
    <span class="k">for</span> client in <span class="nv">$clients</span><span class="p">;</span> <span class="k">do</span>
        <span class="nv">rhels</span><span class="o">=</span><span class="s2">&quot;el6 el7&quot;</span>
        <span class="k">for</span> rhel in <span class="nv">$rhels</span><span class="p">;</span> <span class="k">do</span>
            <span class="nv">max_size</span><span class="o">=</span><span class="m">28</span>
            <span class="k">if</span> <span class="o">[</span> <span class="nv">$rhel</span> <span class="o">=</span> <span class="s2">&quot;el7&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                <span class="nv">max_size</span><span class="o">=</span><span class="m">33</span>
            <span class="k">fi</span>
            <span class="nv">archs</span><span class="o">=</span><span class="s2">&quot;x86_64&quot;</span>
            <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$major_version</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;3.3&quot;</span> -a <span class="nv">$rhel</span> <span class="o">=</span> <span class="s2">&quot;el6&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                <span class="nv">archs</span><span class="o">=</span><span class="s2">&quot;i386 </span><span class="nv">$archs</span><span class="s2">&quot;</span>
            <span class="k">fi</span>
            <span class="k">for</span> arch in <span class="nv">$archs</span><span class="p">;</span> <span class="k">do</span>
                <span class="nv">dir</span><span class="o">=</span>tarballs/<span class="nv">$major_version</span>/<span class="nv">$arch</span>
                dotest
            <span class="k">done</span>
        <span class="k">done</span>
    <span class="k">done</span>
<span class="k">done</span>

<span class="nb">popd</span>
</pre></div>


<p>If you have time, try some of the binaries, such as grid-proxy-init.</p>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>We need to automate this and have it run on the proper architectures and version of RHEL.</p>
</div>
<h3 id="step-7-update-the-uw-afs-installation-of-the-tarball-client">Step 7: Update the UW AFS installation of the tarball client<a class="headerlink" href="#step-7-update-the-uw-afs-installation-of-the-tarball-client" title="Permanent link">&para;</a></h3>
<p>The UW keeps an install of the tarball client in <code>/p/vdt/workspace/tarball-client</code> on the UW's AFS. To update it, run the following commands:</p>
<div class="codehilite"><pre><span></span><span class="nv">NON_UPCOMING_VERSIONS</span><span class="o">=</span><span class="s2">&quot;&lt;NON-UPCOMING VERSION(S)&gt;&quot;</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">for</span> ver in <span class="nv">$NON_UPCOMING_VERSIONS</span><span class="p">;</span> <span class="k">do</span>
    /p/vdt/workspace/tarball-client/afs-install-tarball-client <span class="nv">$ver</span>
<span class="k">done</span>
</pre></div>


<h3 id="step-8-wait">Step 8: Wait<a class="headerlink" href="#step-8-wait" title="Permanent link">&para;</a></h3>
<p>Wait for clearance. The OSG Release Coordinator (in consultation with the Software Team and any testers) need to sign off on the update before it is released. If you are releasing things over two days, this is a good place to stop for the day.</p>
<h2 id="day-2-pushing-the-release">Day 2: Pushing the Release<a class="headerlink" href="#day-2-pushing-the-release" title="Permanent link">&para;</a></h2>
<h3 id="step-1-push-from-pre-release-to-release">Step 1: Push from pre-release to release<a class="headerlink" href="#step-1-push-from-pre-release-to-release" title="Permanent link">&para;</a></h3>
<p>This script moves the packages into release, clones releases into new version-specific release repos,
locks the repos and regenerates them.</p>
<div class="codehilite"><pre><span></span><span class="nv">VERSIONS</span><span class="o">=</span><span class="s2">&quot;&lt;VERSION(S)&gt;&quot;</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="m">2</span>-create-release <span class="nv">$VERSIONS</span>
</pre></div>


<ol>
<li><code>*.txt</code> files are also created and it should be verified that they've been moved to /p/vdt/public/html/release-info/ on UW's AFS.</li>
<li>For each release version, use the <code>*release-note*</code> files to update the relevant sections of the release note pages.</li>
</ol>
<h3 id="step-2-upload-the-client-tarballs">Step 2: Upload the client tarballs<a class="headerlink" href="#step-2-upload-the-client-tarballs" title="Permanent link">&para;</a></h3>
<p>Upload the tarballs to the repository with the following procedure from a UW CS machine (e.g., <code>ingwe</code>):</p>
<div class="codehilite"><pre><span></span><span class="nv">NON_UPCOMING_VERSIONS</span><span class="o">=</span><span class="s2">&quot;&lt;NON-UPCOMING VERSION(S)&gt;&quot;</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="nb">pushd</span> /p/vdt/public/html/tarball-client
<span class="k">for</span> ver in <span class="nv">$NON_UPCOMING_VERSIONS</span><span class="p">;</span> <span class="k">do</span>
    <span class="nv">major_ver</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ver</span><span class="p">%.*</span><span class="si">}</span><span class="s2">&quot;</span>
    ssh osgcollab@hcc-osg-software.unl.edu mkdir -p /usr/local/repo/tarball-install/<span class="nv">$major_ver</span>/<span class="nv">$ver</span>
    scp -p <span class="nv">$major_ver</span>/*/osg-wn-client-<span class="nv">$ver</span>*gz osgcollab@hcc-osg-software.unl.edu:/usr/local/repo/tarball-install/<span class="nv">$major_ver</span>/<span class="nv">$ver</span>
<span class="k">done</span>
<span class="nb">popd</span>
ssh osgcollab@hcc-osg-software.unl.edu bin/mk-sims.sh
<span class="k">for</span> ver in <span class="nv">$NON_UPCOMING_VERSIONS</span><span class="p">;</span> <span class="k">do</span>
    <span class="nv">major_ver</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ver</span><span class="p">%.*</span><span class="si">}</span><span class="s2">&quot;</span>
    ssh osgcollab@hcc-osg-software.unl.edu <span class="s2">&quot;cd /usr/local/repo/tarball-install; ls -l </span><span class="nv">$major_ver</span><span class="s2">/*latest*&quot;</span>
<span class="k">done</span>
<span class="c1"># verify the &quot;latest&quot; symlinks point to the version(s) just installed</span>
</pre></div>


<h3 id="step-3-install-the-tarballs-into-oasis">Step 3: Install the tarballs into OASIS<a class="headerlink" href="#step-3-install-the-tarballs-into-oasis" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must be an OASIS manager of the <code>mis</code> VO to do these steps. Known managers as of 2014-07-22: Mat, Tim C, Tim T, Brian L. </p>
</div>
<p>Get the uploader script from Git and run it with <code>osgrun</code> from the UW AFS install of the tarball client you made earlier. On a UW CSL machine:</p>
<div class="codehilite"><pre><span></span><span class="nv">NON_UPCOMING_VERSIONS</span><span class="o">=</span><span class="s2">&quot;&lt;NON-UPCOMING VERSION(S)&gt;&quot;</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="nb">cd</span> /tmp
git clone --depth <span class="m">1</span> file:///p/vdt/workspace/git/repo/tarball-client.git
<span class="k">for</span> ver in <span class="nv">$NON_UPCOMING_VERSIONS</span><span class="p">;</span> <span class="k">do</span>
    /p/vdt/workspace/tarball-client/current/sys/osgrun /tmp/tarball-client/upload-tarballs-to-oasis <span class="nv">$ver</span>
<span class="k">done</span>
</pre></div>


<p>The script will automatically ssh you to oasis-login.opensciencegrid.org and give you instructions to complete the process.</p>
<h3 id="step-4-remove-old-uw-afs-installations-of-the-tarball-client">Step 4: Remove old UW AFS installations of the tarball client<a class="headerlink" href="#step-4-remove-old-uw-afs-installations-of-the-tarball-client" title="Permanent link">&para;</a></h3>
<p>To keep space usage down, remove tarball client installations and symlinks under <code>/p/vdt/workspace/tarball-client</code> on UW's AFS that are more than 2 months old. The following command will remove them:</p>
<div class="codehilite"><pre><span></span>find /p/vdt/workspace/tarball-client -maxdepth <span class="m">1</span> -mtime +60 -name <span class="m">3</span><span class="se">\*</span> -ls -exec rm -rf <span class="o">{}</span> <span class="se">\;</span>
</pre></div>


<h3 id="step-5-update-the-docker-wn-client">Step 5: Update the Docker WN client<a class="headerlink" href="#step-5-update-the-docker-wn-client" title="Permanent link">&para;</a></h3>
<p>Update the GitHub repo at <a href="https://github.com/opensciencegrid/docker-osg-wn">opensciencegrid/docker-osg-wn</a> using the <code>update-all</code> script found in <a href="https://github.com/opensciencegrid/docker-osg-wn-scripts">opensciencegrid/docker-osg-wn-scripts</a>. This requires push access to the <code>opensciencegrid/docker-osg-wn</code> repo.</p>
<p>Instructions for using the script:</p>
<div class="codehilite"><pre><span></span>git clone git@github.com:opensciencegrid/docker-osg-wn-scripts.git
git clone git@github.com:opensciencegrid/docker-osg-wn.git
docker-osg-wn-scripts/update-all docker-osg-wn
<span class="nb">cd</span> docker-osg-wn
<span class="c1"># Verify everything looks fine and run the &#39;git push&#39; command</span>
<span class="c1"># that &#39;update-all&#39; should have printed</span>
</pre></div>


<h3 id="step-6-announce-the-release">Step 6: Announce the release<a class="headerlink" href="#step-6-announce-the-release" title="Permanent link">&para;</a></h3>
<p>The following instructions are meant for the release manager (or interim release manager). If you are not the release manager, let the release manager know that they can announce the release.</p>
<ol>
<li>
<p>The release manager writes the a release announcement for each version and sends it out.
    The announcement should mention a handful of the most important updates.
    Due to downstream formatting issues, each major change should end at column 76 or earlier.
    Here is a sample, replace <code>&lt;BRACKETED TEXT&gt;</code> with the appropriate values:</p>
<div class="codehilite"><pre><span></span><span class="n">Subject</span><span class="o">:</span> <span class="n">Announcing</span> <span class="n">OSG</span> <span class="n">Software</span> <span class="n">version</span> <span class="o">&lt;</span><span class="n">VERSION</span><span class="o">&gt;</span>

<span class="n">We</span> <span class="n">are</span> <span class="n">pleased</span> <span class="n">to</span> <span class="n">announce</span> <span class="n">OSG</span> <span class="n">Software</span> <span class="n">version</span> <span class="o">&lt;</span><span class="n">VERSION</span><span class="o">&gt;!</span>

<span class="n">Changes</span> <span class="n">to</span> <span class="n">OSG</span> <span class="o">&lt;</span><span class="n">VERSION</span><span class="o">&gt;</span> <span class="k">include</span><span class="o">:</span>
<span class="o">-</span> <span class="n">Major</span> <span class="n">Change</span> <span class="mi">1</span>
<span class="o">-</span> <span class="n">Major</span> <span class="n">Change</span> <span class="mi">2</span>
<span class="o">-</span> <span class="n">Major</span> <span class="n">Change</span> <span class="mi">3</span>

<span class="n">Release</span> <span class="n">notes</span> <span class="n">and</span> <span class="n">pointers</span> <span class="n">to</span> <span class="n">more</span> <span class="n">documentation</span> <span class="n">can</span> <span class="n">be</span> <span class="n">found</span> <span class="n">at</span><span class="o">:</span>

<span class="n">http</span><span class="o">://</span><span class="n">www</span><span class="o">.</span><span class="na">opensciencegrid</span><span class="o">.</span><span class="na">org</span><span class="sr">/docs/release/&lt;SERIES.VERSION&gt;/release-&lt;RELEASE-VERSION&gt;/</span>

<span class="n">Need</span> <span class="n">help</span><span class="o">?</span> <span class="n">Let</span> <span class="n">us</span> <span class="n">know</span><span class="o">:</span>

<span class="n">http</span><span class="o">://</span><span class="n">www</span><span class="o">.</span><span class="na">opensciencegrid</span><span class="o">.</span><span class="na">org</span><span class="sr">/docs/common/help/</span>

<span class="n">We</span> <span class="n">welcome</span> <span class="n">feedback</span> <span class="n">on</span> <span class="k">this</span> <span class="n">release</span><span class="o">!</span>
</pre></div>


</li>
<li>
<p>The release manager uses the <a href="https://opensciencegrid.org/operations/services/sending-announcements/">osg-notify tool</a> to send the release announcement.</p>
</li>
</ol>
<p>For release announcements use the following command:</p>
<div class="codehilite"><pre><span></span><span class="go">PYTHONPATH=src python bin/osg-notify --cert your-cert.pem --key your-key.pem \</span>
<span class="go">    --no-sign --type production --message message-file</span>
<span class="go">    --subject &#39;&lt;EMAIL SUBJECT&gt;&#39; \</span>
<span class="go">    --recipients &quot;osg-general@opensciencegrid.org osg-operations@opensciencegrid.org osg-sites@opensciencegrid.org vdt-discuss@opensciencegrid.org&quot; \</span>
<span class="go">    --oim-recipients resources --oim-contact-type administrative</span>
</pre></div>


<p>Replacing <code>&lt;EMAIL SUBJECT&gt;</code> with an appropriate subject for your announcement.</p>
<ol>
<li>The release manager closes the tickets marked 'Ready for Release' in the release's JIRA filter using the 'bulk change' function.
    Also set the Fix Versions field to the appropriate value(s) and uncheck the box that reads "Send mail for this update"</li>
</ol>
<h2 id="day-3-update-the-itb">Day 3: Update the ITB<a class="headerlink" href="#day-3-update-the-itb" title="Permanent link">&para;</a></h2>
<p>Now that the release has had a chance to propogate to all the mirrors, update the Madison ITB site by following
the <a href="../../infrastructure/madison-itb/#doing-yum-updates">yum update section</a> of the Madison ITB document.
If you are not local to Madison, consult the release manager for the designated person to do the update.
Remember to stop the HTCondor and HTCondor-CE daemons according to the <a href="../../release/itb-testing/#installing-htcondor-prerelease">HTCondor pre-release testing instructions</a>.
Those daemons will need to be restarted after the upgraode.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../software/new-team-member/" title="New Team Member" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                New Team Member
              </span>
            </div>
          </a>
        
        
          <a href="../cut-data-release/" title="How to Cut a Data Release" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                How to Cut a Data Release
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.30f6b8b1.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>